"use strict";angular.module("tagrefineryGuiApp",["angular-intro","ngAnimate","ui.bootstrap","ui.grid","ui.grid.selection","ui.grid.resizeColumns","ui.grid.exporter","ui.grid.importer","ui.grid.rowEdit","ui.grid.cellNav","ui.grid.autoResize","ui.grid.grouping"]),angular.module("tagrefineryGuiApp").controller("MainCtrl",["$scope","socket","uiGridConstants","intros","$timeout",function(a,b,c,d,e){var f=this;f.intro={overlayOpacity:.3,steps:[{intro:"<h3>Welcome! </h3><br>If you need help in any of the pages start the introduction for the page by clicking <i class='fa fa-film'></i> in the right upper corner of the screen.",position:"top-center"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},f.connectionStatus=!1,f.dataLoaded=!1,f.showImport=!1,f.showWorkflow=!1,f.dataChanged=!1,f.running=!1,f.loading=!1,f.touched=!1,f.mode="",e(function(){a.introCurrent=f.intro},1),a.state=d.state,a.dataI=[],b.on("mainData",function(b){var c=JSON.parse(b);c.length>0&&(a.dataI=c,f.dataChanged=!1,f.dataLoaded=!0)}),b.on("isRunning",function(a){f.running="true"==a,1==f.running&&d.set("running")}),b.on("dataLoaded",function(a){f.dataLoaded="true"==a,f.loading=!1}),b.on("selectedMode",function(a){f.mode=a}),f.goToImport=function(){f.showImport=!0,d.set("import")},f.goToStart=function(){f.showWorkflow=!1,f.showImport=!1,f.running?d.set("running"):d.set("initial")},f.reconnectToWorkflow=function(){f.showWorkflow=!0,b.emit("selectMode","reconnect"),d.set("guided")},f.showLinkedView=function(){f.showWorkflow=!0,b.emit("selectMode","linked")},f.showAdvancedView=function(){f.showWorkflow=!0,f.running=!0,b.emit("selectMode","free")},f.startWithDefaults=function(){f.showWorkflow=!0,f.running=!0,b.emit("selectMode","guided"),d.set("guided")},f["import"]=function(){if(f.running=!1,f.dataLoaded=!1,f.loading=!0,f.showImport=!1,f.intro=f.initalIntro,f.dataChanged){var c=500;b.emit("applyImportedDataCount",Math.ceil(a.dataI.length/c));for(var d=0,e=a.dataI.length;e>d;d+=c)b.emit("applyImportedData",JSON.stringify(_.slice(a.dataI,d,d+c)));b.emit("applyImportedDataFinished","")}f.touched=!1},f.clear=function(){a.dataI.length=0},f.getFile=function(b){a.$apply(function(){a.gridApi.importer.importFile(b),f.dataChanged=!0})},a.gridOptions={enableGridMenu:!1,showGridFooter:!0,enableColumnMenus:!1,enableFiltering:!0,data:"dataI",importerDataAddCallback:function(b,d){a.dataI=a.dataI.concat(d),a.gridApi.core.notifyDataChange(c.dataChange.ALL),a.gridApi.core.refresh(),f.touched=!0},onRegisterApi:function(b){a.gridApi=b},columnDefs:[{field:"tag",minWidth:100,width:"*",headerTooltip:"The tag itself composed of one or multiple words."},{field:"item",minWidth:100,width:"*",headerTooltip:"The item where the tag is attached to."},{field:"weight",minWidth:100,width:"*",headerTooltip:"The weight should be a positive number and allows you to use meta information corresponding to this tag/item pair. If no meta information is available, use 1 in all rows."}]},f.reconnect=function(){b.reconnect()},b.on("connect",function(){f.connectionStatus=!0}),b.on("disconnect",function(){f.connectionStatus=!1,f.dataLoaded=!1,f.showImport=!1,f.showWorkflow=!1,f.dataChanged=!1,f.running=!1,f.loading=!1,f.touched=!1,a.dataI.length=0}),b.on("connect_error",function(){f.connectionStatus=!1,f.dataLoaded=!1,f.showImport=!1,f.showWorkflow=!1,f.dataChanged=!1,f.running=!1,f.loading=!1,f.touched=!1,a.dataI.length=0}),a.$watch("state",function(b){b&&(a.introCurrent=b.current)},1)}]),angular.module("tagrefineryGuiApp").factory("d3",function(){return d3}),angular.module("tagrefineryGuiApp").factory("httpLoader",["$http",function(a){return function(b){return a.get(b)}}]),angular.module("tagrefineryGuiApp").factory("socket",["$rootScope",function(a){var b=io.connect("http://localhost:9092",{reconnection:!0,timeout:1e4,reconnectionAttempts:10}),c=function(a,c){b.io.reconnect()},d=function(c,d){b.on(c,function(){var c=arguments;a.$apply(function(){d.apply(b,c)})})},e=function(c,d,e){b.emit(c,d,function(){var c=arguments;a.$apply(function(){e&&e.apply(b,c)})})};return{on:d,emit:e,reconnect:c}}]),angular.module("tagrefineryGuiApp").controller("OverviewCtrl",["$scope","socket","stats","uiGridConstants",function(a,b,c,d){var e=this;e.pre=[],e.spell=[],e.comp=[],e.post=[],e.vocabCount=[],e.datasetCount=[],e.history=[],e.state="",e.dataLoaded=!1,e.compRunning=!1,e.postRunning=!1,e.showHistory=!1,b.on("output",function(a){e.dataLoaded=!0,e.loadStats(),e.grid.data=JSON.parse(a),e.group.data=JSON.parse(a)}),b.on("history",function(a){e.history=JSON.parse(a),e.showHistory=!0,document.getElementById("history").scrollIntoView()}),b.on("outputState",function(a){e.state=a}),b.on("computeComp",function(a){e.compRunning="started"==a}),b.on("computePost",function(a){e.postRunning="started"==a}),b.on("resultVocab",function(a){e.vocab.data=JSON.parse(a)}),e.getHistory=function(a,c){b.emit("getHistory",JSON.stringify([{tag:a,item:c}]))},e.loadStats=function(){e.pre=c.getPre(),e.spell=c.getSpell(),e.comp=c.getComp(),e.post=c.getPost(),e.vocabCount=c.getVocab(),e.datasetCount=c.getDataset()},e.exportCSV=function(){var a=angular.element(document.querySelectorAll(".custom-csv-link-location"));e.gridApi.exporter.csvExport("all","all",a)};var f='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader, \'newItem\': grid.appScope.isCurrent( row ) }" ui-grid-cell></div>';a.isCurrent=function(a){return 1==a.entity.changed},e.grid={rowTemplate:f,showGridFooter:!0,enableFiltering:!0,enableColumnMenus:!1,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,enableGridMenu:!0,exporterPdfDefaultStyle:{fontSize:9},exporterPdfTableStyle:{margin:[30,30,30,30]},exporterPdfTableHeaderStyle:{fontSize:10,bold:!0,italics:!0,color:"red"},exporterPdfOrientation:"portrait",exporterPdfPageSize:"LETTER",exporterPdfMaxGridWidth:500,onRegisterApi:function(b){e.gridApi=b,b.selection.on.rowSelectionChanged(a,function(a){e.getHistory(a.entity.tag,a.entity.item)})},columnDefs:[{field:"tag",minWidth:100,width:"*"},{field:"item",displayName:"Item",minWidth:100,width:"*"},{field:"weight",displayName:"Weight",minWidth:50,width:100},{field:"changed",displayName:"Tag has Changed",minWidth:50,width:"*",visible:!1,sort:{direction:d.DESC,priority:1}}]},e.vocab={enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!0,fastWatch:!0,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,onRegisterApi:function(a){e.vocabGridApi=a},columnDefs:[{field:"tag",minWidth:100,width:"*"},{field:"importance",minWidth:100,width:"*",cellFilter:"number:4",sort:{direction:d.DESC,priority:1}}]},e.group={enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!0,onRegisterApi:function(a){e.vocabGridApi=a},columnDefs:[{field:"tag",minWidth:100,width:"*"},{field:"item",displayName:"Item",minWidth:100,width:"*",grouping:{groupPriority:0},sort:{direction:d.ASC,priority:1}},{field:"weight",displayName:"Weight",minWidth:50,width:100}]}}]),angular.module("tagrefineryGuiApp").directive("d3Hist",["d3","$timeout",function(a,b){var c=function(b){b.formatCount=a.format(",.0f"),b.isFloat?(b.formatMarker=a.format(",.2f"),b.formatTicks=a.format(",.2f")):(b.formatMarker=a.format(",.0f"),b.formatTicks=a.format(",.0f")),b.xScaling=function(){b.ticks=[],b.dx=(b.x.domain()[1]-b.x.domain()[0])/b.binCount;for(var a=0;a<=b.binCount;a++)b.ticks.push(b.x.domain()[0]+a*b.dx)},b.yScaling=function(){var c=a.max(b.hist,function(a){return a.y});return[0,c+c/10]},b.customHist=function(a){b.xScaling();for(var c=[],d=[],e=0;e<b.binCount;e++)d=_.sum(_.filter(a,function(a){return a.value>b.ticks[e]&&a.value<=b.ticks[e+1]}),function(a){return a.count}),c.push({dx:b.dx,x:b.ticks[e],y:d});return c},b.zoomed=function(){var c=a.event.translate,d=a.event.scale;c[0]=Math.min(0,Math.max(b.quadrantWidth*(1-d),c[0])),c[1]=Math.min(0,Math.max(b.quadrantHeight*(1-d),c[1])),b.zoom.translate(c),i(b),b.svg.select(".x.axis").call(b.xAxis),b.svg.select(".y.axis").call(b.yAxis),d>1?b.$apply(function(){b.isZoomed=!0}):b.$apply(function(){b.isZoomed=!1})},b.dragmove=function(){var c=a.event.x;c=Math.max(0,Math.min(b.quadrantWidth,c)),b.isFloat?(b.threshold=b.x.invert(c),b.callBack({threshold:b.x.invert(c)})):(b.threshold=Math.round(b.x.invert(c)),b.callBack({threshold:Math.round(b.x.invert(c))})),g(b)},b.bringToFront=function(){this.each(function(){this.parentNode.appendChild(this)})},b.reset=function(){a.transition().duration(750).tween("zoom",function(){var c=a.interpolate(b.x.domain(),[0,b.xDomain[1]]),d=a.interpolate(b.y.domain(),b.yDomain);return function(a){b.zoom.x(b.x.domain(c(a))).y(b.y.domain(d(a))),i(b),b.svg.select(".x.axis").call(b.xAxis),b.svg.select(".y.axis").call(b.yAxis)}})},b.updateBins=function(){e(b),i(b)},b.make_x_axis=function(){return a.svg.axis().scale(b.x).orient("bottom")},b.make_y_axis=function(){return a.svg.axis().scale(b.y).orient("left")}},d=function(b,c){b.width=a.select(c).node().offsetWidth,b.quadrantWidth=b.width-b.marginLeft-b.margin,b.quadrantHeight=b.height-b.margin-b.margin,b.xDomain=a.extent(b.data,function(a){return a.value}),b.x=a.scale.linear().domain(b.xDomain).nice().range([0,b.quadrantWidth]),b.xLine=a.scale.linear().domain([0,b.quadrantWidth]).range([0,1]),b.hist=b.customHist(b.data),b.xAxis=a.svg.axis().scale(b.x).orient("bottom"),b.yDomain=b.yScaling(),b.y=a.scale.linear().domain(b.yDomain).range([b.quadrantHeight,0]),b.yAxis=a.svg.axis().scale(b.y).orient("left"),b.zoom=a.behavior.zoom().x(b.x).y(b.y).scaleExtent([1,1e3]).size(b.quadrantWidth,b.quadrantHeight).on("zoomstart",function(){b.bodyG.selectAll(".zoomArea").style("cursor","move")}).on("zoomend",function(){b.bodyG.selectAll(".threshold").call(b.bringToFront),b.bodyG.selectAll(".zoomArea").style("cursor","auto")}).on("zoom",b.zoomed),b.drag=a.behavior.drag().on("dragstart",function(){a.event.sourceEvent.stopPropagation()}).on("drag",b.dragmove)},e=function(b){b.xDomain=a.extent(b.data,function(a){return a.value}),b.x.domain(b.xDomain).nice().range([0,b.quadrantWidth]),b.hist=b.customHist(b.data),b.xAxis.scale(b.x),b.yDomain=b.yScaling(),b.y.domain(b.yDomain).range([b.quadrantHeight,0]),b.yAxis.scale(b.y),b.svg.selectAll(".x.axis").call(b.xAxis),b.svg.selectAll(".y.axis").call(b.yAxis),b.zoom.x(b.x).y(b.y)},f=function(b,c){var d=5;b.svg=a.select(c).append("svg").attr("height",b.height).attr("width","100%").style("background-color","white").attr("class","chart"),b.svg.append("text").attr("class","hist-title").attr("text-anchor","middle").attr("x",b.width/2).attr("y",20).text(b.title),b.svg.append("g").attr("class","x axis").attr("transform",function(){return"translate("+b.marginLeft+","+(b.height-b.margin)+")"}).call(b.xAxis),b.svg.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",b.width/2+25).attr("y",b.height-2).text(b.xLabel),b.svg.append("g").attr("class","y axis").attr("transform",function(){return"translate("+b.marginLeft+","+b.margin+")"}).call(b.yAxis),b.svg.append("text").attr("class","y label").attr("text-anchor","middle").attr("x",-(b.height/2)).attr("y",5).attr("dy",".75em").attr("transform","rotate(-90)").text(b.yLabel),b.svg.append("defs").append("clipPath").attr("id","body-clip").append("rect").attr("x",0-1.5*d).attr("y",0).attr("width",b.quadrantWidth+3*d).attr("height",b.quadrantHeight),b.bodyG=b.svg.append("g").attr("class","body").attr("transform","translate("+b.marginLeft+","+b.margin+")").attr("clip-path","url(#body-clip)"),b.bodyG.append("rect").attr("class","zoomArea").attr("width",b.quadrantWidth).attr("height",b.quadrantHeight).call(b.zoom).on("click",function(){a.event.defaultPrevented||(b.isFloat?b.threshold=b.x.invert(a.mouse(this)[0]):b.threshold=Math.round(b.x.invert(a.mouse(this)[0])),b.callBack({threshold:b.threshold}),g(b))}),b.bodyG.append("g").attr("class","x gridLine").attr("transform","translate(0,"+b.quadrantHeight+")").call(b.make_x_axis().tickSize(-b.quadrantHeight,0,0).tickFormat("")),b.bodyG.append("g").attr("class","y gridLine").call(b.make_y_axis().tickSize(-b.quadrantWidth,0,0).tickFormat("")),b.bodyG.selectAll(".zoomArea").on("dblclick.zoom",null),b.marker=b.bodyG.append("g").attr("class","threshold").call(b.drag),b.marker.append("text").attr("class","markerValue").attr("y",b.quadrantHeight/2+5),b.marker.append("line").style("cursor","ew-resize").attr("stroke","black").attr("stroke-width",3).attr("y1",0).attr("y2",b.quadrantHeight),b.marker.append("circle").style("cursor","ew-resize").attr("r",8).attr("cy",b.quadrantHeight/2),b.markerArea=b.bodyG.append("rect").attr("class","markerArea").attr("height",b.quadrantHeight)},g=function(a){a.initialized&&(a.marker.select("line").attr("x1",a.x(a.threshold)).attr("x2",a.x(a.threshold)),a.marker.select("circle").attr("cx",a.x(a.threshold)),a.threshold>=a.xDomain[1]/2?a.marker.select("text").attr("x",a.x(a.threshold)-10).style("text-anchor","end").text(a.formatMarker(a.threshold)):a.marker.select("text").attr("x",a.x(a.threshold)+10).style("text-anchor","start").text(a.formatMarker(a.threshold)),a.fromRight?a.markerArea.attr("x",a.x(a.threshold)).attr("width",function(){var b=a.quadrantWidth-a.x(a.threshold);return b>0?b:0}):a.markerArea.attr("x",0).attr("width",function(){var b=a.x(a.threshold);return b>0?b:0})),a.bodyG.selectAll(".threshold").call(a.bringToFront)},h=function(a){a.hist=a.customHist(a.data),a.xAxis.scale(a.x),a.bodyG.selectAll(".x.gridLine").call(a.make_x_axis().tickSize(-a.quadrantHeight,0,0).tickFormat("")),a.bodyG.selectAll(".y.gridLine").call(a.make_y_axis().tickSize(-a.quadrantWidth,0,0).tickFormat("")),a.bar=a.bodyG.selectAll(".bar").data(a.hist).enter().append("g").attr("class","bar").attr("transform",function(b){return"translate("+a.x(b.x)+","+a.y(b.y)+")"}),a.bar.append("text").attr("dy",".75em").attr("y",-12).attr("class","barLabel").attr("text-anchor","left"),a.bodyG.selectAll(".barLabel").call(a.bringToFront),a.bar.append("rect"),a.bar=a.bodyG.selectAll(".bar").data(a.hist).transition().duration(100).attr("transform",function(b){return"translate("+a.x(b.x)+","+a.y(b.y)+")"}),a.bar.select("text").attr("x",a.x(a.hist[0].x)+5).text(function(b){return a.formatCount(b.y)}),a.bar.select("rect").attr("x",1).attr("width",function(){var b=a.x(a.hist[0].x+a.hist[0].dx)-1;return b>0?b:0}).attr("height",function(b){var c=a.quadrantHeight-a.y(b.y);return c>0?c:0}),a.bodyG.selectAll(".bar").data(a.hist).exit().remove(),g(a),a.bodyG.selectAll(".zoomArea").call(a.bringToFront)},i=function(a){a.initialized&&h(a)},j=function(a,b){c(a,b[0]),d(a,b[0]),f(a,b[0]),a.initialized=!0,i(a)};return{restrict:"EA",transclude:!0,scope:{data:"=",exThreshold:"=threshold",callBack:"&"},templateUrl:"views/hist.html",link:function(a,c,d){a.margin=parseInt(d.margin)||30,a.marginLeft=parseInt(d.marginLeft)||70,a.height=parseInt(d.svgHeight)||300,a.xLabel=d.typeLabel||"",a.yLabel=d.yLabel||"",a.title=d.title||"",a.binCount=parseInt(d.bins)||16;var f=d.isFloat||"true";a.isFloat="true"==f,f=d.fromRight||"true","true"==f?a.fromRight=!0:a.isFloat=!1,a.initialized=!1,a.isZoomed=!1,a.threshold=0,b(function(){a.$watch(function(){return angular.element(window)[0].innerWidth},function(b){b&&i(a)}),a.$watch("data",function(b){b&&b.length>0&&(a.initialized?(e(a),i(a)):j(a,c))},!0),a.$watch("exThreshold",function(b){b?(a.threshold=b,g(a)):0===b&&(a.threshold=b,g(a))})},100)}}}]),angular.module("tagrefineryGuiApp").controller("CompositefrequentCtrl",["$scope","socket","uiGridConstants","$timeout","stats",function(a,b,c,d,e){var f=this;f.touched=!1,f.threshold=0,f.newThreshold=0,f.data=[],f.replacements=0,f.getThreshold=function(b){a.$apply(function(){f.newThreshold=b,d(function(){f.scrollToF(f.getAboveRow(f.frequentGrid.data,f.newThreshold),0)}),f.replacements=f.getGroups(),e.writeComp("Number of Frequent Groups",f.replacements),f.touched=!0,f.applyDebounced()})},f.getAboveRow=function(a,b){for(var c=0,d=0;d<a.length;d++)if(a[d].strength<b)return b-a[d].strength<=a[d-1].strength-b?d:d-1;return c},b.on("frequentData",function(a){f.data=JSON.parse(a),f.replacements=f.getGroups(),e.writeComp("Number of Frequent Groups",f.replacements)}),b.on("frequentGroups",function(a){f.frequentGrid.data=JSON.parse(a)}),b.on("compFrequentParams",function(a){f.newThreshold=parseFloat(a),f.threshold=f.newThreshold}),a.$on("apply",function(){f.touched&&(b.emit("applyFrequentThreshold",""+f.newThreshold),f.touched=!1)}),f.applyDebounced=_.debounce(function(){b.emit("applyFrequentThreshold",""+f.newThreshold)},1e3),a.$on("noCompF",function(){1.5!=f.newThreshold&&(f.newThreshold=1.5,b.emit("applyFrequentThreshold",""+f.newThreshold),f.touched=!1)}),a.$on("dCompF",function(){.1!=f.newThreshold&&(f.newThreshold=.1,b.emit("applyFrequentThreshold",""+f.newThreshold),f.touched=!1)}),a.$on("undo",function(){f.touched&&f.undo()}),f.undo=function(){f.newThreshold=f.threshold,f.touched=!1},f.scrollToF=function(a,b){f.frequentGridApi.core.scrollTo(f.frequentGrid.data[a],f.frequentGrid.columnDefs[b]),f.frequentGridApi.selection.selectRow(f.frequentGrid.data[a])};var g='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader, \'newItem\': grid.appScope.isCurrent( row ) }" ui-grid-cell></div>';a.isCurrent=function(a){return a.entity.strength>=f.newThreshold},f.frequentGrid={rowTemplate:g,enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!0,fastWatch:!0,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,enableFullRowSelection:!0,onRegisterApi:function(b){f.frequentGridApi=b,b.selection.on.rowSelectionChanged(a,function(a){f.newThreshold=a.entity.strength,f.replacements=f.getGroups()})},columnDefs:[{field:"group",minWidth:100,width:"*"},{field:"strength",name:"Group Strength",cellTemplate:"views/cellStrength.html",width:120,enableFiltering:!1,sort:{direction:c.DESC,priority:1}}]},f.getGroups=function(){return _.sum(_.filter(f.data,function(a){return a.value>=f.newThreshold}),function(a){return a.count})}}]),angular.module("tagrefineryGuiApp").controller("CompositeuniqueCtrl",["$scope","socket","uiGridConstants","$timeout","stats",function(a,b,c,d,e){var f=this;f.touched=!1,f.threshold=0,f.newThreshold=0,f.data=[],f.replacements=0,f.getThreshold=function(b){a.$apply(function(){f.newThreshold=b,d(function(){f.scrollToU(f.getAboveRow(f.uniqueGrid.data,f.newThreshold),0)}),f.replacements=f.getGroups(),e.writeComp("Number of Unique Groups",f.replacements),f.touched=!0,f.applyDebounced()})},f.getAboveRow=function(a,b){for(var c=0,d=0;d<a.length;d++)if(a[d].strength<b)return b-a[d].strength<=a[d-1].strength-b?d:d-1;return c},b.on("uniqueData",function(a){f.data=JSON.parse(a),f.replacements=f.getGroups(),e.writeComp("Number of Unique Groups",f.replacements)}),b.on("uniqueGroups",function(a){f.uniqueGrid.data=JSON.parse(a)}),b.on("compUniqueParams",function(a){f.newThreshold=parseFloat(a),f.threshold=f.newThreshold}),a.$on("apply",function(){f.touched&&(b.emit("applyUniqueThreshold",""+f.newThreshold),f.touched=!1)}),a.$on("noCompU",function(){1.5!=f.newThreshold&&(f.newThreshold=1.5,b.emit("applyUniqueThreshold",""+f.newThreshold),f.touched=!1)}),a.$on("dCompU",function(){.9!=f.newThreshold&&(f.newThreshold=.9,b.emit("applyUniqueThreshold",""+f.newThreshold),f.touched=!1)}),f.applyDebounced=_.debounce(function(){b.emit("applyUniqueThreshold",""+f.newThreshold)},1e3),a.$on("undo",function(){f.touched&&f.undo()}),f.undo=function(){f.newThreshold=f.threshold,f.touched=!1},f.scrollToU=function(a,b){f.uniqueGridApi.core.scrollTo(f.uniqueGrid.data[a],f.uniqueGrid.columnDefs[b]),f.uniqueGridApi.selection.selectRow(f.uniqueGrid.data[a])};var g='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader, \'newItem\': grid.appScope.isCurrent( row ) }" ui-grid-cell></div>';a.isCurrent=function(a){return a.entity.strength>=f.newThreshold},f.uniqueGrid={rowTemplate:g,enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!0,fastWatch:!0,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,enableFullRowSelection:!0,onRegisterApi:function(b){f.uniqueGridApi=b,b.selection.on.rowSelectionChanged(a,function(a){f.newThreshold=a.entity.strength,f.replacements=f.getGroups()})},columnDefs:[{field:"group",minWidth:100,width:"*"},{field:"strength",name:"Group Strength",cellTemplate:"views/cellStrength.html",width:120,enableFiltering:!1,sort:{direction:c.DESC,priority:1}}]},f.getGroups=function(){return _.sum(_.filter(f.data,function(a){return a.value>=f.newThreshold}),function(a){return a.count})}}]),angular.module("tagrefineryGuiApp").controller("PreprocessingfilterCtrl",["$scope","socket","uiGridConstants","$timeout","stats",function(a,b,c,d,e){var f=this;f.touched=!1,f.showDetails=!1,f.occurrences=0,f.newOccurrences=0,f.data=[],f.filteredWords=0,f.getOccurrences=function(b){a.$apply(function(){f.newOccurrences=b,f.showDetails&&d(function(){f.scrollTo(f.getAboveRow(f.grid.data,f.newOccurrences),0)}),e.writePre("Number of Filtered Words",f.newCount()),f.touched=!0})},f.getAboveRow=function(a,b){for(var c=a.length,d=0;d<a.length;d++)if(a[d].occurrence<b)return b-a[d].occurrence<=a[d-1].occurrence-b?d:d-1;return c},b.on("preFilterData",function(a){f.data=JSON.parse(a),e.writePre("Number of Filtered Words",f.newCount())}),b.on("preFilterGrid",function(a){f.grid.data=JSON.parse(a)}),b.on("preFilterParams",function(a){f.occurrences=parseFloat(a),f.newOccurrences=f.occurrences,e.writePre("Occurrence threshold",f.newOccurrences),e.writePre("Number of Filtered Words",f.newCount())}),a.$on("apply",function(){f.touched&&(b.emit("applyPrefilter",""+f.newOccurrences),f.occurrences=f.newOccurrences,e.writePre("Occurrence threshold",f.newOccurrences),e.writePre("Number of Filtered Words",f.newCount()),f.touched=!1)}),a.$on("noPreF",function(){0!=f.newOccurrences&&(f.newOccurrences=0,b.emit("applyPrefilter",""+f.newOccurrences),f.occurrences=f.newOccurrences,e.writePre("Occurrence threshold",f.newOccurrences),e.writePre("Number of Filtered Words",f.newCount()),f.touched=!1)}),a.$on("dPreF",function(){for(var a=0,c=f.data.length-1;5e3>a&&c>=0;)a+=f.data[c].count,c--;1>c&&5e3>a?f.newOccurrences=0:f.newOccurrences=f.data[c+1].value,f.occurrences!=f.newOccurrences&&(b.emit("applyPrefilter",""+f.newOccurrences),f.occurrences=f.newOccurrences,e.writePre("Occurrence threshold",f.newOccurrences),e.writePre("Number of Filtered Words",f.newCount())),f.touched=!1}),a.$on("undo",function(){f.touched&&f.undo()}),f.undo=function(){f.newOccurrences=f.occurrences,e.writePre("Occurrence threshold",f.newOccurrences),e.writePre("Number of Filtered Words",f.newCount()),f.touched=!1},f.scrollTo=function(a,b){f.gridApi.core.scrollTo(f.grid.data[a],f.grid.columnDefs[b]),f.gridApi.selection.selectRow(f.grid.data[a]),f.gridApi.selection.unSelectRow(f.grid.data[a])};var g='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader, \'removedItem\': grid.appScope.isRemoved( row ) }" ui-grid-cell></div>';a.isRemoved=function(a){return a.entity.occurrence<=f.newOccurrences},f.grid={rowTemplate:g,enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!1,fastWatch:!0,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,onRegisterApi:function(b){f.gridApi=b,b.selection.on.rowSelectionChanged(a,function(a){f.newOccurrences=a.entity.occurrence,b.core.notifyDataChange(c.dataChange.ALL)})},columnDefs:[{field:"tag",minWidth:100,width:"*"},{field:"occurrence",displayName:"Occurrences",minWidth:100,width:"*",sort:{direction:c.ASC,priority:1}}]},f.openGrid=function(){f.showDetails&&document.getElementById("preFscroll").scrollIntoView(),d(function(){f.scrollTo(f.getAboveRow(f.grid.data,f.newOccurrences),0)})},f.newCount=function(){return _.sum(_.filter(f.data,function(a){return a.value<=f.newOccurrences}),function(a){return a.count})},f.totalCount=function(){return _.sum(f.data,function(a){return a.count})}}]),angular.module("tagrefineryGuiApp").controller("PreprocessingremoveCtrl",["$scope","socket",function(a,b){var c=this;c.remove="",c.newRemove="",b.on("preRemoveParams",function(a){c.remove=a,c.newRemove=c.remove}),a.$on("apply",function(){c.params.$dirty&&(b.emit("applyPreRemoveCharacters",c.newRemove),c.params.$setPristine())}),c.undo=function(){c.newRemove=c.remove,c.params.$setPristine()}}]),angular.module("tagrefineryGuiApp").controller("PreprocessingreplaceCtrl",["$scope","socket",function(a,b){var c=this;c.touched=!1,c.replace=[],c.out=[],c.word="",c.by="",c.add=function(){var a,b;c.word.length<1?(c.word="<Space>",a=" "):a=c.word,c.by.length<1?(c.by="<Space>",b=" "):b=c.by,c.replace.push({replace:c.word,by:c.by}),c.out.push({replace:a,by:b}),c.word="",c.by="",c.touched=!0},c.remove=function(a){c.replace.splice(a,1),c.out.splice(a,1),c.touched=!0},b.on("preReplaceParams",function(a){c.replace.length=0,c.out.length=0,_.each(a,function(a){var b=a.split(",");" "===b[0]?c.replace.push({replace:"<Space>",by:b[1]}):" "===b[1]?c.replace.push({replace:b[0],by:"<Space>"}):c.replace.push({replace:b[0],by:b[1]}),c.out.push({replace:b[0],by:b[1]})})}),a.$on("apply",function(){c.touched&&(b.emit("applyPreReplaceCharacters",JSON.stringify(c.out)),c.touched=!1)})}]),angular.module("tagrefineryGuiApp").controller("PreprocessingimportCtrl",["$scope","socket","uiGridConstants","stats",function(a,b,c,d){var e=this;e["default"]="a,b,c,d,e,f,g,a,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,0,1,2,3,4,5,6,7,8,9,able,about,across,after,all,almost,also,am,among,an,and,any,are,as,at,be,because,been,but,by,can,cannot,could,dear,did,do,does,either,else,ever,every,for,from,get,got,had,has,have,he,her,hers,him,his,how,however,i,if,in,into,is,it,its,just,least,let,like,likely,may,me,might,most,must,my,neither,no,nor,not,of,off,often,on,only,or,other,our,own,rather,said,say,says,she,should,since,so,some,than,that,the,their,them,then,there,these,they,this,tis,to,too,twas,us,wants,was,we,were,what,when,where,which,while,who,whom,why,will,with,would,yet,you,your",e.touched=!1,a.dataP=[],b.on("preDictionaryParams",function(b){a.dataP.length=0,_.map(b,function(b){a.dataP.push({word:b})}),d.writePre("Number of blacklisted Words",a.dataP.length)}),a.$on("apply",function(){e.touched&&(b.emit("applyPreImportedData",JSON.stringify(a.dataP)),d.writePre("Number of blacklisted Words",a.dataP.length),e.touched=!1)}),a.$on("noPreB",function(){0!=a.dataP.length&&(e.clear(),b.emit("applyPreImportedData",JSON.stringify(a.dataP)),d.writePre("Number of blacklisted Words",a.dataP.length),e.touched=!1)}),a.$on("dPreB",function(){e.clear(),_.map(e["default"].split(","),function(b){a.dataP.push({word:b})}),b.emit("applyPreImportedData",JSON.stringify(a.dataP)),d.writePre("Number of blacklisted Words",a.dataP.length),e.touched=!1}),e.clear=function(){a.dataP.length=0,e.touched=!0},e.getFile=function(b){a.$apply(function(){a.gridApi.importer.importFile(b),e.dataChanged=!0})},a.dataP=[],a.gridOptions={enableGridMenu:!1,showGridFooter:!0,enableColumnMenus:!1,enableFiltering:!0,data:"dataP",importerDataAddCallback:function(b,d){a.dataP.length=0,a.dataP=a.dataP.concat(d),a.gridApi.core.notifyDataChange(c.dataChange.ALL),a.gridApi.core.refresh(),e.touched=!0},onRegisterApi:function(b){a.gridApi=b},columnDefs:[{field:"word",minWidth:100,width:"*"}]}}]),angular.module("tagrefineryGuiApp").controller("PostprocessingimportantCtrl",["$scope","socket","uiGridConstants","$timeout","stats",function(a,b,c,d,e){var f=this;f.touched=!1,f.threshold=0,f.newThreshold=0,f.data=[],f.count=0,f.getThreshold=function(b){a.$apply(function(){f.newThreshold=b,d(function(){f.scrollTo(f.getAboveRow(f.grid.data,f.newThreshold),0)}),f.touched=!0,f.count=f.newCount(),7!=a.currentStep&&f.applyDebounced()})},f.getAboveRow=function(a,b){for(var c=0,d=0;d<a.length;d++)if(a[d].importance<b)return b-a[d].importance<=a[d-1].importance-b?d:d-1;return c},b.on("postFilterData",function(a){f.data=JSON.parse(a),f.count=f.newCount(),e.writePost("Number of Important Tags",f.count)}),b.on("postFilterGrid",function(a){f.grid.data=JSON.parse(a)}),b.on("postFilterParams",function(a){f.newThreshold=parseFloat(a),f.threshold=f.newThreshold}),f.applyDebounced=_.debounce(function(){f.apply()},1500),a.$on("apply",function(){f.touched&&f.apply()}),a.$on("noPostI",function(){f.newThreshold=0,f.apply()}),f.apply=function(){b.emit("applyPostFilter",""+f.newThreshold),e.writePost("Number of Important Tags",f.count)},f.scrollTo=function(a,b){f.gridApi.core.scrollTo(f.grid.data[a],f.grid.columnDefs[b]),f.gridApi.selection.selectRow(f.grid.data[a])};var g='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader, \'newItem\': grid.appScope.isCurrent( row ) }" ui-grid-cell></div>';a.isCurrent=function(a){return a.entity.importance>=f.newThreshold},f.grid={rowTemplate:g,enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!0,fastWatch:!0,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,enableullRowSelection:!0,onRegisterApi:function(b){f.gridApi=b,b.selection.on.rowSelectionChanged(a,function(a){f.newThreshold=a.entity.importance,f.count=f.newCount()})},columnDefs:[{field:"tag",minWidth:100,width:"*"},{field:"strength",name:"Word Quality",cellTemplate:"views/cellImportance.html",width:120,enableFiltering:!1,sort:{direction:c.DESC,priority:1}}]},f.newCount=function(){return _.sum(_.filter(f.data,function(a){return a.value>=f.newThreshold}),function(a){return a.count})}}]),angular.module("tagrefineryGuiApp").controller("PostprocessingreplaceCtrl",["$scope","socket","uiGridConstants","$timeout","$q","stats",function(a,b,c,d,e,f){var g=this;g.touched=!1,g.salvagingRunning=!1,g.postRunning=!1,g.replace=[],g.replace.push({}),g.replaceOriginal=[],g.replaceOriginal.push({}),g.remove=[],g.remove.push({}),g.removeOriginal=[],g.removeOriginal.push({}),g.original=[],g.raw=[],g["delete"]=[],g["delete"].push({}),b.on("postImportantWords",function(a){var b=JSON.parse(a),c=JSON.parse(a);g.raw=_.map(b,function(a){return{tag:a.tag,replace:"",remove:!1}}),g.original=_.map(c,function(a){return g.remove[0][a.tag]?{tag:a.tag,replace:"",remove:!0}:g.replace[0][a.tag]?{tag:a.tag,replace:g.replace[0][a.tag],remove:!1}:{tag:a.tag,replace:"",remove:!1}}),g.edit.data=_.cloneDeep(g.original)}),b.on("postReplaceParams",function(a){_.each(a,function(a){var b=a.split(",");g.replace[0][b[0]]=b[1],g.replaceOriginal[0][b[0]]=b[1]})}),b.on("postRemoveParams",function(a){_.each(a,function(a){g.remove[0][a]=!0,g.removeOriginal[0][a]=!0})}),b.on("computePost",function(a){g.postRunning="started"==a}),b.on("postSalvaging",function(a){g.salvagingRunning="true"==a}),g.apply=function(){b.emit("applyPostReplace",JSON.stringify(g.replace)),b.emit("applyPostRemove",JSON.stringify(g.remove)),f.writePost("Replaced Tags",g.replaceCount()),f.writePost("Removed Tags",g.removeCount()),b.emit("applySalvaging",""),g.replaceOriginal=_.cloneDeep(g.replace),g.removeOriginal=_.clone(g.remove)},a.$on("apply",function(){b.emit("applyPostReplace",JSON.stringify(g.replace)),b.emit("applyPostRemove",JSON.stringify(g.remove)),f.writePost("Replaced Tags",g.replaceCount()),f.writePost("Removed Tags",g.removeCount()),g.replaceOriginal=_.cloneDeep(g.replace),g.removeOriginal=_.clone(g.remove)}),a.$on("undo",function(){g.touched&&(g.undo(),b.emit("applyPostReplace",JSON.stringify(g.replace)),b.emit("applyPostRemove",JSON.stringify(g.remove)),f.writePost("Replaced Tags",g.replaceCount()),f.writePost("Removed Tags",g.removeCount()))}),a.$on("postSalvage",function(){
g.apply()}),g.undo=function(){g.edit.data=_.cloneDeep(g.original),g.replace=_.cloneDeep(g.replaceOriginal),g.remove=_.cloneDeep(g.removeOriginal),g.touched=!1},g.clearAll=function(){g.edit.data=_.cloneDeep(g.raw),g.replace=_.cloneDeep(g["delete"]),g.remove=_.cloneDeep(g["delete"]),g.touched=!0},g.updateRemove=function(a){a.tag in g.remove[0]||1==a.remove&&(g.remove[0][a.tag]=!0)};var h="<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader, 'newItem': grid.appScope.isEdited( row ), 'removedItem': grid.appScope.isRemoved( row ) }\" ui-grid-cell></div>";a.isRemoved=function(a){return 1==a.entity.remove},a.isEdited=function(a){return a.entity.replace.length>0},g.edit={enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!0,enableCellEditOnFocus:!0,rowTemplate:h,onRegisterApi:function(b){g.editApi=b,b.edit.on.afterCellEdit(a,function(a,b,c,d){c&&(g.touched=!0,"replace"==b.name&&(a.tag in g.replace[0]?g.replace[0][a.tag]!=c&&(g.replace[0][a.tag]=c):g.replace[0][a.tag]=c)),d&&"replace"==b.name&&delete g.replace[0][a.tag]})},columnDefs:[{field:"tag",displayName:"Tag",minWidth:100,width:"*",enableCellEdit:!1},{field:"replace",displayName:"Replace By",minWidth:100,width:"*"},{field:"remove",displayName:"Remove",minWidth:100,width:75,type:"boolean",enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents" style="text-align: center"><input type="checkbox" ng-change="grid.appScope.ctrl.updateRemove(row.entity)" ng-model="row.entity.remove" style="font-size: xx-large; margin: 0"></div>'}]},g.replaceCount=function(){return Object.keys(g.replace[0]).length},g.removeCount=function(){return Object.keys(g.remove[0]).length}}]),angular.module("tagrefineryGuiApp").controller("SpellcheckingsetCtrl",["$scope","socket","uiGridConstants","stats",function(a,b,c,d){var e=this;e.importance=0,e.newImportance=0,e.similarity=0,e.newSimilarity=0,e.exclude=[],e.newExclude=[],e.touched=!1,e.data=[],e.domain=[0,1],e.replacements=0,e.showReplacements=!1,e.twentyfive=!1,e.zero=!1,e.loading=!1,e.getNewImportance=function(b){a.$apply(function(){e.newImportance=b,e.touched=!0}),e.loading=!0,e.getReplacements(),e.scrollToV(e.getAboveRowImportance(e.grid.data,e.newImportance),0),d.writeSpell("Number of Replacements",e.getReplacementCount()),d.writeSpell("Number of Additional Ground Truth Words",e.countGroundTruth())},e.slider=function(b){a.$apply(function(){e.newSimilarity=b,e.touched=!0}),e.scrollToR(e.getAboveRow(e.replGrid.data,e.newSimilarity),0),d.writeSpell("Number of Replacements",e.getReplacementCount())},e.getAboveRow=function(a,b){for(var c=0,d=0;d<a.length;d++)if(a[d].similarity<=b)return b-a[d].similarity<=a[d-1].similarity-b?d:d-1;return c},e.getAboveRowImportance=function(a,b){for(var c=0,d=0;d<a.length;d++)if(a[d].importance<=b)return b-a[d].importance<=a[d-1].importance-b?d:d-1;return c},b.on("spellImportance",function(a){e.importance=parseFloat(a),e.newImportance=e.importance}),b.on("spellSimilarity",function(a){e.similarity=parseFloat(a),e.newSimilarity=e.similarity}),b.on("spellExclude",function(a){e.exclude=_.clone(a),e.newExclude=_.clone(a)}),b.on("replacementData",function(a){var b=JSON.parse(a);e.replGrid.data=_.map(b,function(a){return _.find(e.newExclude,function(b){return b==a.replacement})?{exclude:!0,replacement:a.replacement,importanceReplacement:a.importanceReplacement,similarity:a.similarity,importanceTag:a.importanceTag,tag:a.tag}:{exclude:!1,replacement:a.replacement,importanceReplacement:a.importanceReplacement,similarity:a.similarity,importanceTag:a.importanceTag,tag:a.tag}}),e.loading=!1,d.writeSpell("Number of Replacements",e.getReplacementCount())}),b.on("spellVocab",function(a){e.grid.data=JSON.parse(a),d.writeSpell("Number of Additional Ground Truth Words",e.countGroundTruth())}),a.$on("apply",function(){e.touched&&(e.similarity=e.newSimilarity,e.importance=e.newImportance,e.exclude=_.clone(e.newExclude),b.emit("applySpellCorrect",JSON.stringify([{importance:e.newImportance,similarity:e.newSimilarity}])),b.emit("applySpellExclude",JSON.stringify(e.newExclude)),e.touched=!1,d.writeSpell("Number of Replacements",e.getReplacementCount()),d.writeSpell("Number of Additional Ground Truth Words",e.countGroundTruth()))}),a.$on("undo",function(){e.touched&&e.undo()}),a.$on("noSpellR",function(){(1!=e.newSimilarity||1!=e.newImportance)&&(e.newSimilarity=1,e.newImportance=1,b.emit("applySpellCorrect",JSON.stringify([{importance:e.newImportance,similarity:e.newSimilarity}])),e.touched=!1,d.writeSpell("Number of Replacements",e.getReplacementCount()),d.writeSpell("Number of Additional Ground Truth Words",e.countGroundTruth()))}),a.$on("dSpellR",function(){(.58!=e.newSimilarity||.7!=e.newImportance)&&(e.newSimilarity=.58,e.newImportance=.7,b.emit("applySpellCorrect",JSON.stringify([{importance:e.newImportance,similarity:e.newSimilarity}])),d.writeSpell("Number of Replacements",e.getReplacementCount()),d.writeSpell("Number of Additional Ground Truth Words",e.countGroundTruth()),e.touched=!1)}),e.undo=function(){e.newSimilarity=e.similarity,e.newImportance=e.importance,e.newExclude=_.clone(e.exclude),e.touched=!1,e.getReplacements(),d.writeSpell("Number of Replacements",e.getReplacementCount()),d.writeSpell("Number of Additional Ground Truth Words",e.countGroundTruth())},e.getReplacements=_.debounce(function(){b.emit("applySpellCorrect",JSON.stringify([{importance:e.newImportance,similarity:e.newSimilarity}])),b.emit("getReplacements",0)},1e3),e.updateExclude=function(a){_.find(e.newExclude,function(b){return b==a.replacement})?_.remove(e.newExclude,function(b){return b==a.replacement}):e.newExclude.push(a.replacement),e.touched=!0},e.scrollToR=function(a,b){e.replGridApi.core.scrollTo(e.replGrid.data[a],e.replGrid.columnDefs[b]),e.replGridApi.selection.selectRow(e.replGrid.data[a])};var f='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader, \'removedItem\': grid.appScope.isReplacement( row ) }" ui-grid-cell></div>';a.isReplacement=function(a){return a.entity.similarity>=e.newSimilarity&&0==a.entity.exclude},e.replGrid={multiSelect:!1,rowHeight:33,enableColumnMenus:!1,enableFiltering:!0,showGridFooter:!0,enableGridMenu:!0,enableRowHeaderSelection:!1,enableRowSelection:!0,enableFullRowSelection:!0,rowTemplate:f,onRegisterApi:function(a){e.replGridApi=a,a.cellNav.on.navigate(null,function(a,b){("similarity"==a.col.field||"replacement"==a.col.field||"tag"==a.col.field)&&a.row.entity.similarity>0&&(e.newSimilarity=a.row.entity.similarity,e.touched=!0)})},columnDefs:[{field:"exclude",displayName:"Exclude",minWidth:100,width:75,type:"boolean",enableCellEdit:!1,cellTemplate:'<div class="ui-grid-cell-contents" style="text-align: center"><input type="checkbox" ng-change="grid.appScope.ctrl.updateExclude(row.entity)" ng-model="row.entity.exclude" style="font-size: xx-large; margin: 0"></div>'},{field:"replacement",displayName:"Replaced Word",minWidth:100,width:"*",cellClass:"textRight"},{field:"importanceReplacement",name:"Word Quality",cellTemplate:"views/cellImportanceReplacement.html",width:120,enableFiltering:!1,visible:!1},{field:"similarity",cellTemplate:"views/cellSimilarity.html",width:120,enableFiltering:!1,sort:{direction:c.DESC,priority:1}},{field:"importanceTag",name:"Higher Word Quality",cellTemplate:"views/cellImportanceTag.html",width:120,enableFiltering:!1,visible:!1},{field:"tag",displayName:"Higher Quality Word",minWidth:100,width:"*"}]};var g='<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader,  \'newItem\': grid.appScope.isTruth( row ) }" ui-grid-cell></div>';a.isTruth=function(a){return a.entity.importance>=e.newImportance},e.scrollToV=function(a,b){e.gridApi.core.scrollTo(e.grid.data[a],e.grid.columnDefs[b]),e.gridApi.selection.selectRow(e.grid.data[a])},e.grid={rowTemplate:g,enableFiltering:!0,enableColumnMenus:!1,enableGridMenu:!0,showGridFooter:!0,fastWatch:!0,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,onRegisterApi:function(b){e.gridApi=b,b.selection.on.rowSelectionChanged(a,function(a){e.newImportance=a.entity.importance,e.loading=!0,e.getReplacements(),e.touched=!0})},columnDefs:[{field:"tag",minWidth:100,width:"*"},{field:"importance",name:"Word Quality",cellTemplate:"views/cellImportance.html",width:120,enableFiltering:!1,sort:{direction:c.DESC,priority:1}}]},e.getReplacementCount=function(){return _.sum(_.filter(e.replGrid.data,function(a){return a.similarity>=e.newSimilarity&&0==a.exclude}),function(){return 1})},e.countGroundTruth=function(){return _.sum(_.filter(e.grid.data,function(a){return a.importance>=e.newImportance}),function(){return 1})}}]),angular.module("tagrefineryGuiApp").service("stats",["socket",function(a){a.on("rawVocabSize",function(a){b.writeVocab("Original",a)}),a.on("preVocabSize",function(a){b.writeVocab("After Preprocessing",a)}),a.on("spellVocabSize",function(a){b.writeVocab("After Spell Correction",a)}),a.on("compVocabSize",function(a){b.writeVocab("After Multiword Tag Detection",a)}),a.on("postVocabSize",function(a){b.writeVocab("Final",a)}),a.on("rawDataset",function(a){b.writeDataset("Original",a)}),a.on("preDataset",function(a){b.writeDataset("After Preprocessing",a)}),a.on("spellDataset",function(a){b.writeDataset("After Spell Correction",a)}),a.on("compDataset",function(a){b.writeDataset("After Multiword Tag Detection",a)}),a.on("postDataset",function(a){b.writeDataset("Final",a)}),a.on("salvageCount",function(a){b.writePost("Salvaged Tags",a)});var b={};return b.vocab={},b.dataset={},b.pre={},b.spell={},b.comp={},b.post={},b.writePre=function(a,c){b.pre[a]=c},b.writeSpell=function(a,c){b.spell[a]=c},b.writeComp=function(a,c){b.comp[a]=c},b.writePost=function(a,c){b.post[a]=c},b.writeVocab=function(a,c){b.vocab[a]=c},b.writeDataset=function(a,c){b.dataset[a]=c},b.getPre=function(){return b.pre},b.getSpell=function(){return b.spell},b.getComp=function(){return b.comp},b.getPost=function(){return b.post},b.getVocab=function(){return b.vocab},b.getDataset=function(){return b.dataset},b}]),angular.module("tagrefineryGuiApp").controller("SpellcheckingimportCtrl",["$scope","socket","uiGridConstants","stats",function(a,b,c,d){var e=this;e["default"]="a,abandon,ability,able,abortion,about,above,abroad,absence,absolute,absolutely,abstract,abuse,academic,accept,acceptable,access,accident,accommodation,accompany,accomplish,accord,account,accurate,accuse,achieve,achievement,acknowledge,acquire,acquisition,across,act,action,active,activity,actor,actual,actually,ad,adapt,add,addition,additional,address,adequate,adjust,adjustment,administration,admire,admit,adopt,adult,advance,advantage,adventure,advertise,advertisement,advice,advise,adviser,advocate,affair,affect,afford,afraid,after,afternoon,again,against,age,agency,agenda,agent,aggressive,ago,agree,agreement,agricultural,ahead,aid,aim,air,aircraft,airline,alarm,album,alcohol,alive,all,allege,allow,ally,almost,alone,along,alongside,already,alright,also,alter,alternative,although,altogether,always,amaze,amendment,among,amount,analysis,analyst,analyze,ancient,and,anger,angle,angry,animal,announce,announcement,annual,another,answer,anticipate,anxiety,anxious,any,anybody,anymore,anyone,anything,anyway,anywhere,apart,apartment,apologize,apparent,apparently,appeal,appear,appearance,application,apply,appoint,appointment,appreciate,approach,appropriate,approval,approve,approximately,architecture,area,argue,argument,arise,arm,army,around,arrange,arrangement,arrest,arrival,arrive,art,article,artist,as,ashamed,aside,ask,assess,assessment,asset,assign,assist,assistance,assistant,associate,association,assume,assumption,assure,at,athlete,atmosphere,attach,attachment,attack,attempt,attend,attendance,attention,attitude,attract,attraction,attractive,attribute,audience,aunt,author,automatically,autumn,available,average,avoid,award,aware,awareness,away,awful,baby,back,background,bad,badly,bag,balance,ball,ban,band,bank,bar,barely,barrier,base,basic,basically,basis,bath,battle,be,beach,bear,beat,beautiful,beauty,because,become,bed,bedroom,beer,before,begin,behave,behavior,behind,belief,believe,bell,belong,below,belt,bend,beneath,benefit,beside,besides,bet,between,beyond,bias,bid,big,bike,bill,billion,bin,bind,biological,bird,birth,bit,bite,black,blame,bless,blind,block,blood,bloody,blow,blue,board,boat,body,bomb,bond,bone,book,boom,boost,boot,border,bore,borrow,boss,both,bother,bottle,bottom,boundary,bowl,box,boy,brain,branch,brand,bread,break,breakfast,breast,breath,breathe,breed,bridge,brief,briefly,bright,brilliant,bring,broad,broadcast,brother,brown,brush,budget,build,bunch,burden,burn,burst,bury,bus,business,busy,but,button,buy,buyer,by,cable,cake,calculate,call,calm,camera,camp,campaign,can,cancel,cancer,cap,capability,capable,capacity,capital,capture,car,carbon,card,care,career,careful,carefully,carpet,carry,case,cash,cast,castle,cat,catalog,catch,category,cause,celebrate,celebration,cell,cent,center,central,century,ceremony,certain,certainly,chain,chair,chairman,challenge,chamber,champion,championship,chance,change,channel,chapter,character,characteristic,characterize,charge,charity,charm,chart,chase,chat,cheap,check,cheek,cheese,chemical,chest,chicken,chief,child,childhood,chip,chocolate,choice,choose,church,cigarette,circle,circumstance,cite,citizen,city,civil,civilian,claim,class,classic,classical,clause,clean,clear,clearly,climate,climb,clinical,clock,close,closely,clothes,clothing,cloud,club,cluster,coach,coal,coast,coat,code,coffee,coin,cold,collapse,colleague,collect,collection,college,color,column,combination,combine,come,comedy,comfort,comfortable,command,comment,commercial,commission,commit,commitment,committee,common,communicate,communication,community,company,compare,comparison,compensation,compete,competition,competitive,competitor,complain,complaint,complete,completely,complex,complexity,complicate,component,compose,composition,compound,comprehensive,comprise,compromise,compute,computer,concentrate,concentration,concept,concern,concert,conclude,conclusion,concrete,condition,conduct,confidence,confident,confirm,conflict,confuse,confusion,connect,connection,consequence,consequently,conservative,consider,considerable,consideration,consist,consistent,constant,constantly,constitute,constraint,construct,construction,consult,consultant,consume,consumer,contact,contain,contemporary,content,contest,context,continue,continuous,contract,contrast,contribute,contribution,control,controversial,convention,conventional,conversation,convert,convince,cook,cool,cooperation,cope,copy,core,corner,corporate,corporation,correct,correspond,cost,cough,could,council,counsel,count,counter,country,county,couple,course,court,cousin,cover,coverage,cow,crack,craft,crash,crazy,cream,create,creation,creative,creature,credit,crew,crime,criminal,crisis,criterion,critic,critical,criticism,criticize,crop,cross,crowd,crucial,cry,cultural,culture,cup,curious,currency,current,currently,curtain,curve,custom,customer,cut,cycle,dad,daily,damage,damn,dance,danger,dangerous,dare,dark,darkness,data,database,date,daughter,day,dead,deal,dealer,dear,death,debate,debt,decade,decide,decision,declare,decline,decrease,dedicate,deep,deeply,defeat,defend,defense,deficit,define,definitely,definition,degree,delay,delight,deliver,delivery,demand,democracy,democratic,demonstrate,demonstration,density,deny,department,depend,dependent,deposit,depress,depression,depth,derive,describe,description,desert,deserve,design,designer,desire,desk,despite,destroy,destruction,detail,detect,determination,determine,develop,development,device,devote,dialog,die,diet,differ,difference,different,differently,difficult,difficulty,dig,digital,dimension,dinner,direct,direction,directly,director,dirty,disagree,disappear,disappoint,disaster,discipline,discount,discover,discovery,discuss,discussion,disease,dish,disk,dismiss,disorder,display,dispute,distance,distant,distinct,distinction,distinguish,distribute,district,disturb,diversity,divide,division,divorce,do,doctor,document,dog,dollar,domestic,dominate,door,double,doubt,down,dozen,draft,drag,drama,dramatic,dramatically,draw,dream,dress,drink,drive,driver,drop,drug,dry,due,during,dust,duty,each,ear,early,earn,earth,ease,easily,east,eastern,easy,eat,economic,economy,edge,edit,edition,editor,educate,education,educational,effect,effective,effectively,efficiency,efficient,effort,egg,either,elderly,elect,election,electric,electricity,electronic,element,eliminate,else,elsewhere,e-mail,embarrass,embrace,emerge,emergency,emotion,emotional,emphasis,emphasize,empire,employ,employee,employer,employment,empty,enable,encounter,encourage,end,enemy,energy,engage,engine,engineer,enhance,enjoy,enormous,enough,ensure,enter,enterprise,entertain,entertainment,entire,entirely,entitle,entrance,entry,envelope,environment,environmental,episode,equal,equally,equation,equipment,equivalent,era,error,escape,especially,essay,essential,establish,establishment,estate,estimate,ethnic,evaluate,evaluation,even,evening,event,eventually,ever,every,everybody,everyday,everyone,everything,everywhere,evidence,evil,evolution,evolve,exact,exactly,exam,examination,examine,example,exceed,excellent,except,exception,excess,exchange,excite,excitement,exclude,excuse,executive,exercise,exhaust,exhibit,exhibition,exist,existence,expand,expansion,expect,expectation,expenditure,expense,expensive,experience,experiment,experimental,expert,explain,explanation,explore,export,expose,exposure,express,expression,extend,extension,extensive,extent,external,extra,extract,extraordinary,extreme,extremely,eye,face,facility,fact,factor,factory,fade,fail,failure,fair,fairly,faith,faithfully,fall,false,familiar,family,famous,fan,fancy,fantastic,far,farm,farmer,fascinate,fashion,fast,fat,father,fault,favor,favorite,fear,feature,federal,fee,feed,feel,fellow,female,fence,festival,few,fiction,field,fifteen,fifty,fight,figure,file,fill,film,filter,final,finally,finance,financial,find,fine,finger,finish,fire,firm,firmly,first,firstly,fish,fit,fix,flag,flash,flat,flexible,flight,float,flood,floor,flow,flower,fly,focus,fold,folk,follow,food,fool,foot,football,for,force,forecast,foreign,forest,forever,forget,form,formal,format,formation,former,formula,forth,fortunate,fortune,forward,found,foundation,fragment,frame,framework,free,freedom,freeze,frequency,frequent,frequently,fresh,friend,friendly,friendship,frighten,from,front,fruit,fuel,fulfill,full,fully,fun,function,functional,fund,fundamental,funny,furniture,further,furthermore,future,gain,gallery,game,gap,garden,gas,gate,gather,gay,gaze,gear,gender,gene,general,generally,generate,generation,genetic,gentle,gentleman,gently,genuine,gesture,get,giant,gift,girl,give,glad,glance,glass,global,go,goal,god,gold,golden,golf,good,govern,government,governor,grab,grade,gradually,graduate,grain,grammar,grand,grandmother,grant,grass,grateful,gray,great,greatly,green,greet,grin,ground,group,grow,growth,guarantee,guard,guess,guest,guide,guideline,guilty,guitar,gun,guy,habit,hair,half,hall,hand,handle,hang,happen,happiness,happy,harbor,hard,hardly,harm,hat,hate,have,he,head,health,healthy,hear,heart,heat,heavily,heavy,height,hell,hello,help,helpful,hence,her,here,hero,herself,hesitate,hi,hide,high,highlight,highly,hill,him,himself,hint,hire,his,historian,historic,historical,history,hit,hold,holder,hole,holiday,home,honest,honor,hook,hope,hopefully,horrible,horse,hospital,host,hot,hotel,hour,house,household,how,however,huge,human,humor,hunger,hunt,hurry,hurt,husband,hypothesis,I,ice,idea,ideal,identify,identity,if,ignore,ill,illegal,illness,illustrate,illustration,image,imagination,imagine,immediate,immediately,immigrant,implement,implementation,implication,imply,import,importance,important,impose,impossible,impress,impression,impressive,improve,improvement,in,incentive,inch,incident,include,income,incorporate,increase,increasingly,indeed,independence,independent,index,indicate,indication,individual,industrial,industry,infant,infection,inflation,influence,inform,information,initial,initially,initiative,injure,injury,inner,innocent,innovation,input,inquiry,inside,insight,insist,inspire,install,instance,instead,institution,institutional,instruction,instrument,insurance,insure,integrate,intellectual,intelligence,intend,intense,intention,interaction,interest,interior,internal,international,interpret,interpretation,intervention,interview,into,introduce,introduction,invent,invest,investigate,investigation,investment,investor,invitation,invite,involve,involvement,iron,island,isolate,issue,it,item,its,itself,jacket,jail,job,join,joint,joke,journal,journalist,journey,joy,judge,judgment,jump,jury,just,justice,justify,keen,keep,key,kick,kid,kill,kind,king,kiss,kitchen,knee,knife,knock,know,knowledge,label,labor,laboratory,lack,lady,lake,land,landscape,language,large,largely,last,late,latter,laugh,laughter,launch,law,lawyer,lay,layer,lazy,lead,leader,leadership,league,lean,leap,learn,least,leather,leave,lecture,left,leg,legal,legislation,lend,length,less,lesson,let,letter,level,liability,liberal,library,license,lie,life,lift,light,like,likely,limit,limitation,line,link,lip,liquid,list,listen,listener,literally,literary,literature,little,live,load,loan,local,locate,location,lock,log,logic,long,look,loose,lose,loss,lot,loud,love,lovely,lover,low,luck,lucky,lunch,luxury,machine,mad,magazine,magic,mail,main,mainly,maintain,maintenance,major,majority,make,maker,male,man,manage,management,manager,manner,manufacture,manufacturer,many,map,march,margin,mark,market,marriage,marry,mass,massive,master,match,mate,material,mathematics,matter,mature,maximum,may,maybe,mayor,me,meal,mean,meanwhile,measure,measurement,meat,mechanism,medical,medicine,medium,meet,member,membership,memory,mental,mention,menu,mere,merely,mess,message,metal,meter,method,middle,might,mile,military,milk,mind,mine,minimum,minister,minor,minority,minute,mirror,miss,mission,mistake,mix,mixture,mobile,mode,model,moderate,modern,modify,module,mom,moment,money,monitor,month,monthly,mood,moon,moral,more,moreover,morning,mortgage,most,mostly,mother,motion,motivate,motivation,motor,mount,mountain,mouse,mouth,move,movement,movie,much,multiple,murder,muscle,museum,music,musical,musician,must,mutual,my,myself,mystery,name,narrative,narrow,nation,national,native,natural,naturally,nature,near,nearby,nearly,necessarily,necessary,neck,need,negative,neglect,negotiate,negotiation,neighbor,neighborhood,neither,nerve,nervous,net,network,never,nevertheless,new,newly,news,newspaper,next,nice,night,no,nobody,noise,none,nor,normal,normally,north,northern,nose,not,note,nothing,notice,notion,noun,novel,now,nowadays,nowhere,nuclear,number,numerous,nurse,object,objective,obligation,observation,observe,obvious,obviously,occasion,occasionally,occupy,occur,ocean,odd,of,off,offense,offer,office,officer,official,often,oil,okay,old,on,once,one,online,only,onto,open,opera,operate,operation,operator,opinion,opponent,opportunity,oppose,opposite,opposition,option,or,orange,order,ordinary,organic,organization,organize,origin,original,originally,other,otherwise,ought,our,ourselves,out,outcome,outline,output,outside,over,overall,overcome,overseas,owe,own,owner,ownership,pace,pack,package,page,pain,paint,pair,pale,panel,panic,paper,paragraph,parallel,parent,park,part,participant,participate,participation,particular,particularly,partly,partner,partnership,party,pass,passage,passenger,passion,past,path,patient,pattern,pause,pay,payment,peace,peak,peer,pen,penalty,pension,people,per,perceive,percent,percentage,perception,perfect,perfectly,perform,performance,perhaps,period,permanent,permission,permit,person,personal,personality,personally,personnel,perspective,persuade,phase,phenomenon,philosophy,phone,photo,photograph,phrase,physical,piano,pick,picture,piece,pig,pile,pilot,pink,pipe,pitch,place,plain,plan,plane,planet,plant,plastic,plate,platform,play,player,pleasant,please,pleasure,plenty,plot,plus,pocket,poem,poet,poetry,point,police,policy,political,politician,politics,poll,pollution,pool,poor,pop,popular,population,port,portion,portrait,pose,position,positive,possess,possession,possibility,possible,possibly,post,pot,potato,potential,potentially,pound,pour,poverty,power,powerful,practical,practice,praise,pray,precise,precisely,predict,prefer,preference,pregnancy,pregnant,premise,preparation,prepare,presence,present,presentation,preserve,president,presidential,press,pressure,presumably,pretend,pretty,prevent,previous,previously,price,pride,primarily,primary,prime,principal,principle,print,printer,prior,priority,prison,prisoner,private,privilege,prize,pro,probability,probably,problem,procedure,proceed,process,produce,producer,product,production,profession,professional,professor,profile,profit,program,progress,project,promise,promote,promotion,prompt,proof,proper,properly,property,proportion,proposal,propose,prospect,protect,protection,protein,protest,proud,prove,provide,province,provision,psychological,pub,public,publication,publisher,pull,pump,pupil,purchase,pure,purpose,pursue,push,put,qualification,qualify,quality,quantity,quarter,question,quick,quickly,quiet,quietly,quite,quote,race,racial,radical,radio,rail,rain,raise,random,range,rank,rapid,rapidly,rare,rarely,rat,rate,rather,ratio,raw,reach,react,reaction,read,reader,ready,real,reality,realize,really,rear,reason,reasonable,reasonably,recall,receive,recent,recently,reckon,recognition,recognize,recommend,recommendation,record,recover,recovery,recruit,red,reduce,reduction,refer,reference,reflect,reflection,reform,refugee,refuse,regard,regardless,region,regional,register,registration,regret,regular,regularly,regulate,regulation,reject,relate,relation,relationship,relative,relatively,relax,release,relevant,reliable,relief,religion,religious,rely,remain,remark,remarkable,remember,remind,remote,remove,rent,repair,repeat,replace,reply,report,reporter,represent,representation,representative,reputation,request,require,requirement,rescue,research,researcher,reserve,resident,resign,resist,resistance,resolution,resolve,resort,resource,respect,respectively,respond,response,responsibility,responsible,rest,restaurant,restore,restrict,restriction,result,retail,retain,retire,retirement,return,reveal,revenue,reverse,review,revise,revolution,reward,rice,rich,rid,ride,right,ring,rise,risk,rival,river,road,rock,role,roll,romantic,roof,room,root,rough,roughly,round,route,routine,row,royal,ruin,rule,run,rural,rush,sad,safe,safety,sail,sake,salary,sale,salt,same,sample,sanction,sand,satisfaction,satisfy,save,say,scale,scan,scare,scene,schedule,scheme,scholar,school,science,scientific,scientist,scope,score,scream,screen,sea,seal,search,season,seat,second,secondary,secondly,secret,secretary,section,sector,secure,security,see,seed,seek,seem,segment,select,selection,self,sell,send,senior,sense,sensitive,sentence,separate,sequence,series,serious,seriously,servant,serve,server,service,session,set,settle,settlement,several,severe,sex,sexual,shade,shadow,shake,shall,shape,share,shareholder,sharp,she,sheep,sheet,shelf,shell,shelter,shift,shine,ship,shirt,shock,shoe,shoot,shop,shore,short,shot,should,shoulder,shout,show,shower,shut,sick,side,sigh,sight,sign,signal,significance,significant,significantly,silence,silent,silly,silver,similar,similarly,simple,simply,since,sing,singer,single,sink,sir,sister,sit,site,situate,situation,size,ski,skill,skin,skirt,sky,slave,sleep,slice,slide,slight,slightly,slip,slope,slow,slowly,small,smart,smell,smile,smoke,smooth,snap,snow,so,social,society,soft,software,soil,soldier,solid,solution,solve,some,somebody,somehow,someone,something,sometimes,somewhat,somewhere,son,song,soon,sorry,sort,soul,sound,source,south,southern,space,spare,speak,speaker,special,specialist,specialize,species,specific,specifically,specify,speech,speed,spell,spend,spin,spirit,split,sponsor,sport,spot,spread,spring,square,stability,stable,staff,stage,stain,stair,stake,stamp,stand,standard,star,stare,start,state,statement,station,statistic,status,stay,steady,steal,steel,stem,step,stick,still,stimulate,stir,stock,stomach,stone,stop,storage,store,storm,story,straight,strain,strange,stranger,strategy,stream,street,strength,strengthen,stress,stretch,strict,strike,string,strip,stroke,strong,strongly,structural,structure,struggle,student,studio,study,stuff,stupid,style,subject,submit,subsequent,subsequently,substance,substantial,substitute,succeed,success,successful,successfully,such,sudden,suddenly,suffer,sufficient,sugar,suggest,suggestion,suit,suitable,sum,summarize,summary,summer,sun,supplement,supplier,supply,support,supporter,suppose,sure,surely,surface,surgery,surprise,surprisingly,surround,survey,survival,survive,suspect,suspend,sustain,swear,sweep,sweet,swim,swing,switch,symbol,symptom,system,table,tackle,tail,take,tale,talent,talk,tall,tank,tap,tape,target,task,taste,tax,taxi,tea,teach,teacher,team,tear,technical,technique,technology,teenager,telephone,television,tell,temperature,temporary,tend,tendency,tender,tennis,tension,tent,term,terrible,territory,terrorist,test,text,than,thank,that,the,theater,their,them,theme,themselves,then,theoretical,theory,therapy,there,therefore,these,they,thick,thin,thing,think,thirst,this,those,though,threat,threaten,throat,through,throughout,throw,thus,ticket,tie,tight,till,time,tiny,tip,tire,tissue,title,to,today,together,tomorrow,tone,tongue,tonight,too,tool,tooth,top,topic,total,totally,touch,tough,tour,tourism,tourist,toward,tower,town,toy,trace,track,trade,tradition,traditional,traffic,trail,train,transfer,transform,transition,translate,transport,transportation,trap,travel,treat,treatment,tree,trend,trial,trick,trigger,trip,troop,trouble,truck,true,truly,trust,truth,try,tube,tune,turn,twice,twin,twist,type,typical,typically,ugly,ultimately,unable,uncertainty,uncle,unclear,under,undergo,underlie,understand,undertake,unemployment,unfortunately,uniform,union,unique,unit,unite,universal,universe,university,unknown,unless,unlike,unlikely,until,unusual,up,update,upon,upper,upset,urban,urge,us,use,useful,user,usual,usually,valley,valuable,value,van,variable,variation,variety,various,vary,vast,vegetable,vehicle,venture,verb,version,versus,very,vessel,veteran,via,vice,victim,victory,video,view,village,violence,violent,virtually,virus,visible,vision,visit,visitor,visual,vital,voice,volume,voluntary,volunteer,vote,voter,wage,wait,wake,walk,wall,wander,want,war,warm,warn,wash,waste,watch,water,wave,way,we,weak,weakness,wealth,wealthy,weapon,wear,weather,web,wed,week,weekend,weekly,weigh,weight,weird,welcome,welfare,well,west,western,wet,what,whatever,wheel,when,whenever,where,whereas,wherever,whether,which,while,whilst,whisper,white,who,whole,whom,whose,why,wide,widely,wife,wild,will,win,wind,window,wine,wing,winner,winter,wipe,wire,wise,wish,with,withdraw,within,without,witness,woman,wonder,wonderful,wood,wooden,word,work,worker,world,worry,worth,would,wound,wrap,write,writer,wrong,yard,year,yellow,yes,yesterday,yet,yield,you,young,your,yourself,youth,zero,zone",e.touched=!1,a.dataS=[],b.on("spellDictionaryParams",function(b){a.dataS.length=0,_.map(b,function(b){a.dataS.push({word:b})}),d.writeSpell("Number of Dictionary Words",a.dataS.length)}),a.$on("apply",function(){e.touched&&(b.emit("applySpellImportedData",JSON.stringify(a.dataS)),d.writeSpell("Number of Dictionary Words",a.dataS.length),e.touched=!1)}),a.$on("noSpellT",function(){0!=a.dataS.length&&(e.clear(),b.emit("applySpellImportedData",JSON.stringify(a.dataS)),d.writeSpell("Number of Dictionary Words",a.dataS.length),e.touched=!1)}),a.$on("dSpellT",function(){e.clear(),_.map(e["default"].split(","),function(b){a.dataS.push({word:b})}),b.emit("applySpellImportedData",JSON.stringify(a.dataS)),d.writeSpell("Number of Dictionary Words",a.dataS.length),
e.touched=!1}),e.clear=function(){a.dataS.length=0,e.touched=!0},e.getFile=function(b){a.$apply(function(){a.gridApi.importer.importFile(b)})},a.gridOptions={enableGridMenu:!1,showGridFooter:!0,enableColumnMenus:!1,enableFiltering:!0,data:"dataS",importerDataAddCallback:function(b,d){a.dataS.length=0,a.dataS=a.dataS.concat(d),a.gridApi.core.notifyDataChange(c.dataChange.ALL),a.gridApi.core.refresh(),e.touched=!0},onRegisterApi:function(b){a.gridApi=b},columnDefs:[{field:"word",minWidth:100,width:"*"}]}}]),angular.module("tagrefineryGuiApp").controller("SpellcheckingparamsCtrl",["$scope","socket",function(a,b){var c=this;c.minWordSize=0,c.newMinWordSize=0,b.on("spellMinWordSize",function(a){c.minWordSize=a,c.newMinWordSize=c.minWordSize}),a.$on("apply",function(){c.params.$dirty&&(b.emit("applySpellMinWordSize",c.newMinWordSize),c.params.$setPristine())}),c.undo=function(){c.newMinWordSize=c.minWordSize,c.params.$setPristine()}}]),angular.module("tagrefineryGuiApp").controller("CompositeparamsCtrl",["$scope","socket",function(a,b){var c=this;c.maxGroupSize=3,c.newMaxGroupSize=0,c.minOcc=2,c.newMinOcc=0,c.split=!0,c.newSplit=!0,b.on("compSizeParams",function(a){c.maxGroupSize=a,c.newMaxGroupSize=a}),b.on("compSplitParams",function(a){c.split=a,c.newSplit=a}),b.on("compOccParams",function(a){c.minOcc=a,c.newMinOcc=a}),a.$on("apply",function(){c.params.$dirty&&(b.emit("applyCompositeParams",JSON.stringify([{maxGroupSize:c.newMaxGroupSize,minOcc:c.newMinOcc,split:c.newSplit}])),c.params.$setPristine())}),c.undo=function(){c.newMaxGroupSize=c.maxGroupSize,c.newMinOcc=c.minOcc,c.newSplit=c.split,c.params.$setPristine()}}]),angular.module("tagrefineryGuiApp").controller("PostprocessingparamsCtrl",["$scope","socket",function(a,b){var c=this;c.useAllWords=!0,c.newUseAllWords=!0,c.minWordLength=3,c.newMinWordLength=3,c.split=!0,c.newSplit=!0,b.on("postAllParams",function(a){c.useAllWords=a,c.newUseAllWords=a}),b.on("postSplitParams",function(a){c.split=a,c.newSplit=a}),b.on("postLengthParams",function(a){c.minWordLength=a,c.newMinWordLength=a}),a.$on("apply",function(){c.params.$dirty&&(b.emit("applyPostParams",JSON.stringify([{minWordLength:c.newMinWordLength,useAll:c.newUseAllWords,split:c.newSplit}])),c.params.$setPristine())}),c.undo=function(){c.newUseAllWords=c.useAllWords,c.newMinWordLength=c.minWordLength,c.newSplit=c.split,c.params.$setPristine()}}]),angular.module("tagrefineryGuiApp").directive("d3Slider",["d3","$timeout",function(a,b){function c(){var b,c,d,e,f,g,h,i,j,k=this;k.init=function(l,m){function n(){var b=Math.max(0,Math.min(f,a.event.x));m.data=b,j.select(".outer."+m.name).attr("cx",b),j.select(".inner."+m.name).attr("cx",b),a.selectAll(".left."+m.name).attr("width",function(a){return b}),a.selectAll(".right."+m.name).attr("width",function(a){return f-b}).attr("x",function(a){return b});var c=1,e=1;m.data<f/2?(c=0,e=1):(c=1,e=0),a.selectAll(".leftlabel."+m.name).attr("opacity",c).attr("x",function(a){return b-g-5}).text(i(d.invert(b))),a.selectAll(".rightlabel."+m.name).attr("opacity",e).attr("x",function(a){return b+g/2+5}).text(i(d.invert(b))),m.callBack({value:d.invert(m.data)})}function o(){}m.width=a.select(l[0]).node().offsetWidth,f=m.width-40,g=m.heigth-20,i=a.format(",.2f"),c=a.behavior.drag().on("drag",n).on("dragend",o),b=a.select(l[0]).append("svg").attr("width",m.width).attr("height",m.heigth+25),d=a.scale.linear().domain(m.domain).range([0,f]),h=a.svg.axis().scale(d).orient("bottom"),b.append("g").attr("class","x axis").attr("transform",function(){return"translate(20,"+(g+10)+")"}).call(h),b.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",f/2).attr("y",g+40).text(m.xLabel),e=b.append("g").attr("height",g).attr("width",f).attr("transform","translate(20, 10)"),e.append("rect").attr("class","left "+m.name).attr("y",0).attr("height",g).on("click",function(b){m.data=a.mouse(this)[0],m.callBack({value:d.invert(m.data)}),k.render(m)}),e.append("text").attr("class","leftlabel value "+m.name).attr("y",g/2+5),e.append("rect").attr("class","right "+m.name).attr("y",0).attr("height",g).on("click",function(b){m.data=a.mouse(this)[0],m.callBack({value:d.invert(m.data)}),k.render(m)}),e.append("text").attr("class","rightlabel value "+m.name).attr("y",g/2+5).text(function(a){return i(d.invert(m.data))}),j=e.append("g").attr("class","marker "+m.name).call(c),j.append("circle").attr("class","outer left "+m.name).attr("r",20).attr("cy",g/2),j.append("circle").attr("class","inner "+m.name).attr("r",10).attr("cy",g/2).attr("fill","black")},k.render=function(b){j.select(".outer."+b.name).attr("cx",b.data),j.select(".inner."+b.name).attr("cx",b.data),a.selectAll(".left."+b.name).attr("width",b.data),a.selectAll(".right."+b.name).attr("width",function(a){return f-b.data}).attr("x",function(a){return b.data});var c=1,e=1;b.data<f/2?(c=0,e=1):(c=1,e=0),a.selectAll(".leftlabel."+b.name).attr("opacity",c).attr("x",function(a){return b.data-g-5}).text(i(d.invert(b.data))),a.selectAll(".rightlabel."+b.name).attr("opacity",e).attr("x",function(a){return b.data+g/2+5}).text(i(d.invert(b.data)))},k.scale=function(a){return d(a)}}return{restrict:"A",controller:c,scope:{value:"=",domain:"=",callBack:"&"},link:function(a,c,d,e){a.heigth=parseInt(d.heigth)||70,a.xLabel=d.xlabel||"x-label",a.name=d.name||"slider",a.data=0,b(function(){e.init(c,a),a.$watch(function(){return angular.element(window)[0].innerWidth},function(b){b&&e.render(a)}),a.$watch("value",function(b){b&&(a.data=e.scale(b),e.render(a))})},100)}}}]),angular.module("tagrefineryGuiApp").directive("d3Bar",["d3","$timeout",function(a,b){function c(){var b,c,d,e,f,g=this;g.init=function(g,h){h.width=a.select(g[0]).node().offsetWidth,e=h.width,f=h.height,b=a.select(g[0]).append("svg").attr("width",e).attr("height",f),c=a.scale.linear().domain(h.domain).range([0,e]),d=b.append("g").attr("height",f).attr("width",e).attr("transform","translate(0,0)"),d.append("rect").attr("class","leftCell").attr("y",0).attr("width",c(h.value)).attr("height",f),d.append("rect").attr("class","rightCell").attr("y",0).attr("width",function(){return e-c(h.value)}).attr("x",function(){return c(h.value)}).attr("height",f),d.append("line").attr("stroke","white").attr("stroke-width",2).attr("class","innerMarker").attr("x1",c(h.marker)).attr("x2",c(h.marker)).attr("y1",0).attr("y2",f)},g.update=function(a){d.selectAll(".leftCell").attr("width",c(a.value)),d.selectAll(".rightCell").attr("width",function(){return e-c(a.value)}).attr("x",function(){return c(a.value)}),d.selectAll(".innerMarker").attr("x1",c(a.marker)).attr("x2",c(a.marker))}}return{restrict:"A",controller:c,scope:{value:"@",domain:"=",marker:"@"},link:function(a,c,d,e){a.height=parseInt(d.height)||20,a.width=parseInt(d.width)||100,b(function(){e.init(c,a),a.$watch("value",function(b){b&&e.update(a)}),a.$watch("marker",function(b){b&&e.update(a)})},100)}}}]),angular.module("tagrefineryGuiApp").directive("uploadButton",["$timeout",function(a){return{restrict:"EA",scope:{getFile:"&"},templateUrl:"views/upload.html",link:function(b){a(function(){var a=function(a){var c=a.srcElement||a.target;if(c&&c.files&&1===c.files.length){var d=c.files[0];b.getFile({file:d}),c.form.reset()}},c=document.querySelectorAll(".upload");1!==c.length?console.log("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):c[0].addEventListener("change",a,!1)},100)}}}]),angular.module("tagrefineryGuiApp").directive("spinCircle",function(){return{replace:!0,template:"<div class='sk-circle'> <div class='sk-circle1 sk-child'></div> <div class='sk-circle2 sk-child'></div> <div class='sk-circle3 sk-child'></div> <div class='sk-circle4 sk-child'></div> <div class='sk-circle5 sk-child'></div> <div class='sk-circle6 sk-child'></div> <div class='sk-circle7 sk-child'></div> <div class='sk-circle8 sk-child'></div> <div class='sk-circle9 sk-child'></div> <div class='sk-circle10 sk-child'></div> <div class='sk-circle11 sk-child'></div> <div class='sk-circle12 sk-child'></div> </div>"}}),angular.module("tagrefineryGuiApp").directive("spinRect",function(){return{replace:!0,template:'<div class="sk-cube-grid"> <div class="sk-cube sk-cube1"></div> <div class="sk-cube sk-cube2"></div> <div class="sk-cube sk-cube3"></div> <div class="sk-cube sk-cube4"></div> <div class="sk-cube sk-cube5"></div> <div class="sk-cube sk-cube6"></div> <div class="sk-cube sk-cube7"></div> <div class="sk-cube sk-cube8"></div> <div class="sk-cube sk-cube9"></div> </div>'}}),angular.module("tagrefineryGuiApp").controller("WorkflowCtrl",["$scope","socket","intros","stats",function(a,b,c,d){var e=this;e.init=!1,e.initRunning=!1,e.preRunning=!1,e.spellRunning=!1,e.compRunning=!1,e.postRunning=!1,e.isIntermediate=!1,e.isFinal=!1,e.mode="",e.pre=d.getPre(),e.spell=d.getSpell(),e.comp=d.getComp(),e.post=d.getPost(),e.vocabCount=d.getVocab(),e.datasetCount=d.getDataset(),a.showStep=!1,a.currentStep=-1,e.progress=[],e.progress.push({value:0,text:0,type:"warning"}),e.progress.push({value:0,text:0,type:"success"}),e.progress.push({value:0,text:0,type:"warning"}),e.updateProgress=function(){a.currentStep<=1&&(e.progress[0].value=100*a.currentStep/10,e.progress[0].text=100*a.currentStep),a.currentStep<7&&(e.progress[1].value=100*(a.currentStep-1)/10,e.progress[1].text=(a.currentStep-1)/5*100),e.progress[2].value=100*(a.currentStep-7)/10,e.progress[2].text=(a.currentStep-7)/3*100},e.jumpTo=function(b){a.currentStep=b,a.showStep=!1,e.updateProgress()},b.on("selectedMode",function(a){e.mode=a,e.init=!0}),b.on("initRunning",function(a){e.initRunning="started"==a}),b.on("computePre",function(a){e.preRunning="started"==a}),b.on("computeSpell",function(a){e.spellRunning="started"==a}),b.on("computeComp",function(a){e.compRunning="started"==a}),b.on("computePost",function(a){e.postRunning="started"==a}),e.customize=function(){a.showStep=!a.showStep,1==a.currentStep&&b.emit("getBlacklist",""),2==a.currentStep&&b.emit("getWhitelist",""),9==a.currentStep&&(a.$broadcast("postSalvage"),a.currentStep++,e.updateProgress()),a.showStep?(0==a.currentStep&&c.set("preFilter"),1==a.currentStep&&c.set("preBlacklist"),2==a.currentStep&&c.set("spellTruth"),3==a.currentStep&&c.set("spellCorrect"),4==a.currentStep&&c.set("compF"),5==a.currentStep&&c.set("compU"),7==a.currentStep&&c.set("postF"),8==a.currentStep&&c.set("postR"),9==a.currentStep&&c.set("postS")):c.set("guided")},e.ok=function(){a.showStep=!1,a.currentStep++,c.set("guided"),e.updateProgress(),6==a.currentStep?(e.isIntermediate=!0,a.showStep=!0,c.set("result")):10==a.currentStep&&(e.isFinal=!0,a.showStep=!0,c.set("result")),e.apply(),6==a.currentStep&&b.emit("computeWorkflow","")},e.back=function(){a.showStep=!1,a.currentStep--,c.set("guided"),e.updateProgress(),6==a.currentStep&&(a.showStep=!0)},e.restartFinalize=function(){a.showStep=!1,a.currentStep=7,e.updateProgress()},e.restart=function(){a.showStep=!1,a.currentStep=1,e.updateProgress()},e.goToAdvanced=function(){c.set("advanced"),b.emit("selectMode","free")},e.goToLinked=function(){c.set("linked"),b.emit("selectMode","linked")},e.apply=function(){a.$broadcast("apply"),b.emit("computeWorkflow","")},e.start=function(){a.currentStep=0},e.runAll=function(){b.emit("applyPrefilter","0"),d.writePre("Occurrence threshold",0),d.writePre("Number of Filtered Words",0),b.emit("computeWorkflow","")},e.getPercent=function(b){return a.currentStep/b*100},e["default"]=function(){0==a.currentStep&&a.$broadcast("dPreF"),1==a.currentStep&&(a.$broadcast("dPreB"),e.apply()),2==a.currentStep&&(a.$broadcast("dSpellT"),e.apply()),3==a.currentStep&&a.$broadcast("dSpellR"),4==a.currentStep&&a.$broadcast("dCompF"),5==a.currentStep&&(a.$broadcast("dCompU"),e.apply()),a.showStep=!1,a.currentStep++,c.set("guided"),e.updateProgress(),6==a.currentStep&&(e.isIntermediate=!0,a.showStep=!0),10==a.currentStep&&(e.isFinal=!0,a.showStep=!0)},e.no=function(){0==a.currentStep&&a.$broadcast("noPreF"),1==a.currentStep&&(a.$broadcast("noPreB"),e.apply()),2==a.currentStep&&(a.$broadcast("noSpellT"),e.apply()),3==a.currentStep&&a.$broadcast("noSpellR"),4==a.currentStep&&a.$broadcast("noCompF"),5==a.currentStep&&(a.$broadcast("noCompU"),e.apply()),7==a.currentStep&&a.$broadcast("noPostI"),a.showStep=!1,a.currentStep++,c.set("guided"),e.updateProgress(),6==a.currentStep&&(e.isIntermediate=!0,a.showStep=!0),10==a.currentStep&&(e.isFinal=!0,a.showStep=!0)}}]),angular.module("tagrefineryGuiApp").controller("LinkedCtrl",["$scope","socket","uiGridConstants","$interval","stats",function(a,b,c,d,e){var f=this;f.linked=!0,f.initRunning=!1,f.preRunning=!1,f.spellRunning=!1,f.compRunning=!1,f.preFilter=!1,f.vocabIn=0,f.datasetIn=0,f.vocabOut=0,f.datasetOut=0,f.spellChanged=!1,f.compChanged=!1,f.vocabInChanged=!1,f.datasetInChanged=!1,f.vocabOutCHanged=!1,f.datasetOutChanged=!1,f.preData=[],f.pre=0,f.newPre=0,f.spellData=[],f.spellI=0,f.newSpellI=0,f.spellS=0,f.newSpellS=0,f.spellDomain=[0,1],f.spellRepl=0,f.spellTruth=0,f.compDataF=[],f.compDataU=[],f.compF=0,f.compU=0,f.newCompF=0,f.newCompU=0,f.getPre=function(b){a.$apply(function(){f.newPre=b,f.filteredWords=f.getPreCount(),e.writePre("Number of Remaining Words",f.filteredWords)}),f.applyPre()},f.getSpellI=function(b){a.$apply(function(){f.newSpellI=b}),f.spellChanged=!0,f.getSpellTruth(),f.applySpell()},f.getSlider=function(b){a.$apply(function(){f.newSpellS=b}),f.spellChanged=!0,f.newSimilarity<.5&&!f.twentyfive&&(f.getReplacements(.25),f.twentyfive=!0),f.newSimilarity<.25&&!f.zero&&(f.getReplacements(0),f.zero=!0),e.writeSpell("Number of Replacements",f.getReplacementCount()),f.getSpellTruth(),f.applySpell()},f.getCompF=function(b){a.$apply(function(){f.newCompF=b,e.writeComp("Number of Frequent Groups",f.getCompFCount())}),f.compChanged=!0,f.applyCompF()},f.getCompU=function(b){a.$apply(function(){f.newCompU=b,e.writeComp("Number of Frequent Groups",f.getCompUCount())}),f.compChanged=!0,f.applyCompU()},b.on("selectedMode",function(a){"linked"==a&&(f.linked=!0)}),b.on("preVocabSize",function(a){f.vocabIn=a,f.vocabInChanged=!0}),b.on("compVocabSize",function(a){f.vocabOut=a,f.vocabOutCHanged=!0}),b.on("preDataset",function(a){f.datasetIn=a,f.datasetInChanged=!0}),b.on("compDataset",function(a){f.datasetOut=a,f.datasetOutChanged=!0}),b.on("initRunning",function(a){f.initRunning="started"==a}),b.on("computePre",function(a){f.preRunning="started"==a}),b.on("computeSpell",function(a){f.spellRunning="started"==a}),b.on("computeComp",function(a){f.compRunning="started"==a}),b.on("preFilterData",function(a){f.preData=JSON.parse(a)}),b.on("preFilterParams",function(a){f.pre=parseFloat(a),f.newPre=f.pre,e.writePre("Minimum Occurrence",f.newPre)}),b.on("spellImportance",function(a){f.spellI=parseFloat(a),f.newSpellI=f.spellI,e.writeSpell("Minimum Word Quality",Math.round(1e3*f.newSpellI)/1e3)}),b.on("spellSimilarity",function(a){f.spellS=parseFloat(a),f.newSpellS=f.spellS,e.writeSpell("Minimum Word Similarity ",Math.round(1e3*f.newSpellS)/1e3)}),b.on("importance",function(a){f.spellData=JSON.parse(a)}),b.on("replacementData",function(a){f.replGrid.data=JSON.parse(a)}),b.on("frequentData",function(a){f.compDataF=JSON.parse(a),e.writeComp("Number of Frequent Groups",f.getCompFCount())}),b.on("compFrequentParams",function(a){f.newCompF=parseFloat(a),f.compF=f.newCompF}),b.on("uniqueData",function(a){f.compDataU=JSON.parse(a),e.writeComp("Number of Unique Groups",f.getCompUCount())}),b.on("compUniqueParams",function(a){f.newCompU=parseFloat(a),f.compU=f.newCompU}),f.last=[],f.out=[],b.on("postFilterGrid",function(a){var b=JSON.parse(a);f.out.length=0,f.out=_.map(b,function(a){return _.find(f.last,{tag:a.tag})?(_.remove(f.last,{tag:a.tag}),{tag:a.tag,importance:a.importance,changed:0}):{tag:a.tag,importance:a.importance,changed:2}}),f.last.length>0&&_.forEach(f.last,function(a){f.out.push({tag:a.tag,importance:a.importance,changed:1})}),f.last.length=0,f.vocabGrid.data=f.out,f.last=_.cloneDeep(f.out)}),f.applyPre=_.debounce(function(){b.emit("applyPrefilter",""+f.newPre),b.emit("computeWorkflow","")},1e3),f.applySpell=_.debounce(function(){b.emit("applySpellCorrect",JSON.stringify([{importance:f.newSpellI,similarity:f.newSpellS}])),b.emit("computeWorkflow","")},1e3),f.applyCompF=_.debounce(function(){b.emit("applyFrequentThreshold",""+f.newCompF),b.emit("computeWorkflow","")},1e3),f.applyCompU=_.debounce(function(){b.emit("applyUniqueThreshold",""+f.newCompU),b.emit("computeWorkflow","")},1e3),f.applyPreB=_.debounce(function(){b.emit("applyPreImportedData",JSON.stringify(a.dataBlacklist)),b.emit("computeWorkflow","")},1e3);var g="<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader, 'newItem': grid.appScope.isNew( row ), 'removedItem': grid.appScope.isRemoved( row ) }\" ui-grid-cell></div>";a.isNew=function(a){return 2==a.entity.changed},a.isRemoved=function(a){return 1==a.entity.changed},f.vocabGrid={rowTemplate:g,enableFiltering:!0,showGridFooter:!0,enableColumnMenus:!1,enableGridMenu:!0,fastWatch:!0,multiSelect:!1,enableRowHeaderSelection:!1,enableRowSelection:!0,enableFullRowSelection:!0,onRegisterApi:function(b){f.vocabGridApi=b,b.selection.on.rowSelectionChanged(a,function(a){})},columnDefs:[{field:"tag",minWidth:100,width:"*"},{field:"importance",minWidth:100,width:"*",cellFilter:"number:6",filters:[{condition:c.filter.GREATER_THAN,placeholder:"greater than"},{condition:c.filter.LESS_THAN,placeholder:"less than"}]},{field:"changed",displayName:"Tag has Changed",minWidth:50,width:"*",visible:!1,sort:{direction:c.DESC,priority:1}}]};var h="<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader, 'replacement': grid.appScope.isReplacement( row ), 'truth': grid.appScope.isTruth( row ) }\" ui-grid-cell></div>";a.isReplacement=function(a){return a.entity.similarity>=f.newSimilarity&&a.entity.importanceReplacement<f.newImportance},a.isTruth=function(a){return a.entity.importanceReplacement>=f.newImportance},f.replGrid={multiSelect:!1,rowHeight:33,enableColumnMenus:!1,enableFiltering:!0,showGridFooter:!0,enableGridMenu:!0,enableRowHeaderSelection:!1,enableRowSelection:!0,enableFullRowSelection:!0,rowTemplate:h,onRegisterApi:function(b){f.replGridApi=b,b.selection.on.rowSelectionChanged(a,function(a){a.entity.similarity>0&&(f.newSimilarity=a.entity.similarity),b.core.notifyDataChange(c.dataChange.ALL)})},columnDefs:[{field:"replacement",displayName:"Replaced Word",minWidth:100,width:"*",cellClass:"textRight"},{field:"importanceReplacement",name:"Lower Word Quality",cellTemplate:"views/cellImportanceReplacement.html",width:120,enableFiltering:!1},{field:"similarity",cellTemplate:"views/cellSimilarity.html",width:120,enableFiltering:!1,sort:{direction:c.DESC,priority:1}},{field:"importanceTag",name:"Higher Word Quality",cellTemplate:"views/cellImportanceTag.html",width:120,enableFiltering:!1},{field:"tag",displayName:"Higher Quality Word",minWidth:100,width:"*"}]},f.clear=function(){a.dataBlacklist.length=0,f.applyPreB()},f.getFile=function(b){a.$apply(function(){a.gridApi.importer.importFile(b)})},f.goToResult=function(){b.emit("selectMode","guided")},f.resetHighlight=function(){console.log("tset"),f.spellChanged=!1,f.compChanged=!1,f.vocabInChanged=!1,f.datasetInChanged=!1,f.vocabOutCHanged=!1,f.datasetOutChanged=!1};var i=d(f.resetHighlight,1e4);a.$on("$destroy",function(){d.cancel(i)}),f.getReplacementCount=function(){return _.sum(_.filter(f.replGrid.data,function(a){return a.similarity>=f.newSpellS&&a.importanceReplacement<f.newSpellI}),function(){return 1})},f.getSpellTruth=function(){f.spellTruth=_.sum(_.filter(f.spellData,function(a){return a.value>=f.newSpellI}),function(a){return a.count})},f.getCompFCount=function(){return _.sum(_.filter(f.compDataF,function(a){return a.value>=f.newCompF}),function(a){return a.count})},f.getCompUCount=function(){return _.sum(_.filter(f.compDataU,function(a){return a.value>=f.newCompU}),function(a){return a.count})}}]),angular.module("tagrefineryGuiApp").factory("intros",function(){var a=this;a.list={};var b={};return a.list.initial={overlayOpacity:.3,steps:[{element:"#update2",intro:"Import your csv file.",position:"top"},{element:"#start2",intro:"The guided Mode provides default values and guides you through the process.",position:"top"},{element:"#start3",intro:"The advanced mode provides additional parameters and options but is unguided.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.running={overlayOpacity:.3,steps:[{element:"#update1",intro:"Reconnect to the current Season.",position:"top"},{element:"#update2",intro:"Update your data here.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list["import"]={overlayOpacity:.3,steps:[{element:"#import1",intro:"Upload a csv file or add another file.",position:"top"},{element:"#import2",intro:"Review the uploaded data.",position:"top"},{element:"#import3",intro:'<span class="fa fa-trash"></span> Clear or <span class="fa fa-floppy-o"></span> Save the uploaded data.',position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.guided={overlayOpacity:.3,steps:[{element:"#guided1",intro:"Use the default values described ...",position:"top"},{element:"#guided2",intro:"... in the lower area. Mouse over the area to highlight it. <strong>Bolt</strong> words provide additional information on mouse over.",position:"top"},{element:"#guided3",intro:"Click here to customize the step.",position:"top"},{element:"#guided4",intro:"Each <strong>bold</strong> word provides additional informations by mouseover.",position:"top"},{element:"#guided5",intro:"Switch between the different modes.    ",position:"right"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.preFilter={overlayOpacity:.3,steps:[{element:"#preF1",intro:"The plot shows how many words occur how often. Find the minimum occurrence a word should have. <br> You can <strong>zoom and pan</strong> into sensitive areas and select a value by dragging the horizontal bar or clicking into the plot.",position:"top"},{element:"#preF2",intro:"You can see/update the threshold and the number of words in the dataset using the current threshold.",position:"top"},{element:"#preF3",intro:"Inspect Words opens a grid view where you can see all words and there occurrence.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.preBlacklist={overlayOpacity:.3,steps:[{element:"#preB1",intro:"The currently used list of words which will be removed from the dataset.",position:"top"},{element:"#preB2",intro:"Add words from a new file to the list.",position:"top"},{element:"#preB3",intro:"Clear the list.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.spellTruth={overlayOpacity:.3,steps:[{element:"#spellT1",intro:"The currently used list of words which are treated as correct words and used as seeds for the spell correction.",position:"top"},{element:"#spellT2",intro:"Add words from a new file to the list.",position:"top"},{element:"#spellT3",intro:"Clear the list.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.spellCorrect={overlayOpacity:.3,steps:[{element:"#spellC1",intro:"The plot shows how many words have a certain word quality. Find the minimum occurrence a word should have. <br> You can <strong>zoom and pan</strong> into sensitive areas and select a value by dragging the horizontal bar or clicking into the plot.",position:"top"},{element:"#spellC2",intro:"The current threshold and the number of words which will be treated as correct.",position:"top"},{element:"#spellC3",intro:"Shows a list with all words and the corresponding word qualities.",position:"top"},{element:"#spellC4",intro:"You can choose a similarity by moving the black dot around.",position:"top"},{element:"#spellC5",intro:"The current similarity and the number of total replacements.",position:"top"},{element:"#spellC6",intro:"Shows a list of all replacements.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.compF={overlayOpacity:.3,steps:[{element:"#compF1",intro:"The plot shows how many multiword tags have a certain group strength. <br> You can <strong>zoom and pan</strong> into sensitive areas and select a value by dragging the horizontal bar or clicking into the plot.",position:"top"},{element:"#compF2",intro:"The current threshold and the number of accepted groups.",position:"top"},{element:"#compF3",intro:"Shows a list of all groups.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.compU={overlayOpacity:.3,steps:[{element:"#compU1",intro:"The plot shows how many multiword tags have a certain group strength. <br> You can <strong>zoom and pan</strong> into sensitive areas and select a value by dragging the horizontal bar or clicking into the plot.",position:"top"},{element:"#compU2",intro:"The current threshold and the number of accepted groups.",position:"top"},{element:"#compU3",intro:"Shows a list of all groups.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.result={overlayOpacity:.3,steps:[{element:"#result1",intro:"The list shows the final dataset. By selecting an element ...",position:"top"},{element:"#result2",intro:"... the history of the selected row will be shown.",position:"top"},{element:"#result3",intro:"This is a summary all parameters.",position:"top"},{element:"#result4",intro:"Refine shows the linked view and allows further parameter refinement.",position:"top"},{element:"#result5",intro:"The advanced mode gives more freedom and less guidance.",position:"top"},{element:"#result6",intro:"Finalize the dataset.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.linked={overlayOpacity:.3,steps:[{element:"#linked1",intro:"Set preprocessing parameters like occurrence filter and blacklist words.",position:"bottom"},{element:"#linked2",intro:"Define which words should be treated as correct.",position:"top"},{element:"#linked3",intro:"Set a similarity for the replacement algorithm.",position:"top"},{element:"#linked4",intro:"Find frequent multiword tags.",position:"top"},{element:"#linked5",intro:"Find unique multiword tags.",position:"top"},{element:"#linked6",intro:"A summary of the parameters.",position:"top"},{element:"#linked7",intro:"The resulting vocabulary. (Not the whole dataset!)",position:"top"},{element:"#linked8",intro:"Go back to the result page.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.postF={overlayOpacity:.3,steps:[{element:"#postF1",intro:"The graph shows the number of tags with a certain word quality. <br> You can <strong>zoom and pan</strong> into sensitive areas and select a value by dragging the horizontal bar or clicking into the plot.",position:"top"},{element:"#postF2",intro:"Shows the current threshold and the number of important tags.",position:"top"},{element:"#postF3",intro:"Shows a list of all tags.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},a.list.postS={overlayOpacity:.3,steps:[{element:"#postS1",intro:"The list shows the selected important tags. You can rename a tag by writting the new name into the Replace by column and remove tags by switching the Remove column to true.",position:"top"},{element:"#postS2",intro:"Shows a list with all salvaged items.",position:"top"},{element:"#postS3",intro:"Undo all chages.",position:"top"},{element:"#postS4",intro:"Apply the changes from the grid to the dataset.",position:"top"}],showStepNumbers:!1,showBullets:!0,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>Next</strong>",prevLabel:"Previous",skipLabel:"Exit",doneLabel:"Done"},{state:b,set:function(c){b.current=a.list[c]}}}),angular.module("tagrefineryGuiApp").run(["$templateCache",function(a){a.put("views/cellImportance.html",'<div class="ui-grid-cell-contents post" uib-tooltip="{{row.entity.importance | number:3 }}" tooltip-placement="left"> <div d3-bar domain="[0,1]" value="{{row.entity.importance}}" marker="{{grid.appScope.ctrl.newImportance}}"></div> </div>'),a.put("views/cellImportanceReplacement.html",'<div class="ui-grid-cell-contents importance" uib-tooltip="{{row.entity.importanceReplacement | number:3 }}" tooltip-placement="left"> <div d3-bar domain="[0,1]" value="{{row.entity.importanceReplacement}}" marker="1.1"></div> </div>'),a.put("views/cellImportanceTag.html",'<div class="ui-grid-cell-contents importance" uib-tooltip="{{row.entity.importanceTag | number:3 }}" tooltip-placement="left"> <div d3-bar domain="[0,1]" value="{{row.entity.importanceTag}}" marker="1.1"></div> </div>'),a.put("views/cellSimilarity.html",'<div class="ui-grid-cell-contents similarity" uib-tooltip="{{row.entity.similarity | number:3 }}" tooltip-placement="left"> <div d3-bar domain="[0,1]" value="{{row.entity.similarity}}" marker="{{grid.appScope.ctrl.newSimilarity}}"></div> </div>'),a.put("views/cellStrength.html",'<div class="ui-grid-cell-contents strength" uib-tooltip="{{row.entity.strength | number:3 }}" tooltip-placement="left"> <div d3-bar domain="[0,1]" value="{{row.entity.strength}}" marker="{{grid.appScope.ctrl.newThreshold}}"></div> </div>'),a.put("views/composite.frequent.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Select how many multi-word tags should be considered</span><br> A high group strength indicates the sequence of words appears frequently and can be a multi-word tag </div> <div class="alert alert-info" ng-show="ctrl.info"> The <b>group strength</b> is the normalized frequency of the tag. <br> 1 means this multi-word tag appeared most often and 0 means it appeared never. </div> </div> <div class="row taskInner"> <div class="col-sm-9"> <div id="compF1" ng-if="status.open[0] || (currentStep == 4 && showStep)" d3-hist data="ctrl.data" call-back="ctrl.getThreshold(threshold)" threshold="ctrl.newThreshold" bins="24" svg-height="400" type-label="Group Strength" y-label="Count"></div> <div style="margin-left: 70px"> <p>Default Threshold: <strong style="font-size: large">0.100</strong></p> <p>Threshold: <strong style="font-size: large">{{ctrl.newThreshold | number:4 }}</strong></p> <p>Number of accepted multi-word Tags: <strong style="font-size: large">{{ ctrl.replacements }}</strong></p> </div> </div> <div class="col-sm-3"> <span><strong style="background-color: rgba(50, 121, 183, 0.2)">Blue:</strong> Accepted Groups</span><br> <div style="height: 500px" ng-if="status.open[0] || (currentStep == 4 && showStep)" id="compFgrid" ui-grid="ctrl.frequentGrid" ui-grid-selection ui-grid-resize-columns ui-grid-exporter></div> </div> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo pull-right round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.touched"> <span class="fa fa-undo"></span> </button> </div> </div>'),
a.put("views/composite.html",'<div class="scafold"> <uib-accordion> <uib-accordion-group is-open="status.open[2]" panel-class="panel-advanced"> <uib-accordion-heading> <div class="descriptionHeaderAdvanced"> Advanced - Parameters <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[2], \'glyphicon-chevron-right\': !status.open[2]}"></i> <br> <p class="descriptionText">Set the max group size, min group occurrence and composite split parameters.</p> </div> </uib-accordion-heading> <div class="row" ng-controller="CompositeparamsCtrl as ctrl" ng-include="\'views/composite.params.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[0]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Find Frequent Multiword Tags <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[0], \'glyphicon-chevron-right\': !status.open[0]}"></i> <br> <p class="descriptionText">How many frequent multiword tags should be considered.</p> </div> </uib-accordion-heading> <div class="row" ng-controller="CompositefrequentCtrl as ctrl" ng-include="\'views/composite.frequent.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[1]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Find Unique Multiword Tags <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[1], \'glyphicon-chevron-right\': !status.open[1]}"></i> <br> <p class="descriptionText">How many unique multiword tags should be considered.</p> </div> </uib-accordion-heading> <div class="row" ng-controller="CompositeuniqueCtrl	 as ctrl" ng-include="\'views/composite.unique.html\'"></div> </uib-accordion-group> </uib-accordion> </div>'),a.put("views/composite.params.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Advanced Parameters</span><br> For detailed information click onto the info button on the left. </div> <div class="alert alert-info" ng-show="ctrl.info"> <strong>Max Group Size</strong> No groups above this value will be computed. <strong>Min Group Occurrence</strong> No unique group below this value will be considered. <br> This parameters allows you the removal of unique but very rare groups. <strong>Split Groups</strong> If this parameter is set to true. Composite tags like "hard-rock song" will be <br> split into two distinct tags: "hard-rock" and "song". <br> </div> </div> <!--Task Parameters and details--> <div class="row taskInner"> <div class="col-sm-12" style="text-align: left"> <form name="ctrl.params"> <h5> <label> Max Group Size: <input type="number" ng-model="ctrl.newMaxGroupSize" uib-tooltip="What should the maximum word count per group be?"> </label> <br> <label> Min Group Occurrence: <input type="number" ng-model="ctrl.newMinOcc" uib-tooltip="What is the minimum number of occurrences a group should have to be considered?"> </label> <br> <label> Split Groups: <input type="checkbox" ng-model="ctrl.newSplit" uib-tooltip="Should composite non groups stay together?"> </label> </h5> </form> </div> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.params.$dirty"> <span class="fa fa-undo"></span> </button> </div> </div>'),a.put("views/composite.unique.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Select how many multi-word tags should be considered</span><br> A high group strength indicates the the sequence of words appears mostly in this combination and can be a multi-word tag </div> <div class="alert alert-info" ng-show="ctrl.info"> The groups strength is the number of multi-word tag occurrences divided by the sum of the single occurrences. <br> This brings up unique groups like artist names. </div> </div> <div class="row taskInner"> <div class="col-sm-9"> <div id="compU1" ng-if="status.open[1] || (currentStep == 5 && showStep)" d3-hist data="ctrl.data" call-back="ctrl.getThreshold(threshold)" threshold="ctrl.newThreshold" bins="24" svg-height="400" type-label="Group Strength" y-label="Count"></div> <div style="margin-left: 70px"> <p>Default Threshold: <strong style="font-size: large">0.900</strong></p> <p>Threshold: <strong style="font-size: large">{{ctrl.newThreshold | number:4 }}</strong></p> <p>Number of accepted multi-word Tags: <strong style="font-size: large">{{ ctrl.replacements }}</strong></p> </div> </div> <div class="col-sm-3"> <span><strong style="background-color: rgba(50, 121, 183, 0.2)">Blue:</strong> Accepted Groups</span><br> <div style="height: 500px" ng-if="status.open[1] || (currentStep == 5 && showStep)" id="compUgrid" ui-grid="ctrl.uniqueGrid" ui-grid-selection ui-grid-resize-columns ui-grid-exporter></div> </div> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.touched"> <span class="fa fa-undo"></span> </button> </div> </div>'),a.put("views/dashboard.html",'<uib-tabset justified="true" active="active" ng-if="ctrl.mode == \'free\'"> <uib-tab index="0" disable="ctrl.disabled[0]" deselect="ctrl.apply()"> <uib-tab-heading style="color: #333"> <label class="pull-left">1</label> Preprocessing </uib-tab-heading> <div class="alert alert-info" style="text-align: center" ng-if="ctrl.initRunning"> <strong>Loading Data ... </strong> <br> <div spin-circle style="width: 40px; height: 40px"></div> </div> <div class="scafold"> <span class="glyphicon glyphicon-info-sign"></span><strong>Preprocess</strong> the dataset to reduce the number of words and characters. </div> <div class="row" ng-include="\'views/preprocessing.html\'"></div> </uib-tab> <uib-tab index="1" disable="ctrl.disabled[1]" deselect="ctrl.apply()"> <uib-tab-heading style="color: #333"> <label class="pull-left">2</label> Spell-correct </uib-tab-heading> <div class="alert alert-info" style="text-align: center" ng-if="ctrl.preRunning"> <strong>Apply Preprocessing ... </strong> <br> <div spin-circle style="width: 40px; height: 40px"></div> </div> <div class="scafold"> <span class="glyphicon glyphicon-info-sign"></span><strong>Spell-correct</strong> to reduce the number of word forms and spelling errors. </div> <div class="row" ng-include="\'views/spellchecking.html\'"></div> </uib-tab> <uib-tab index="2" disable="ctrl.disabled[2]" deselect="ctrl.apply()"> <uib-tab-heading style="color: #333"> <label class="pull-left">3</label> Multiword Tags </uib-tab-heading> <div class="alert alert-info" style="text-align: center" ng-if="ctrl.spellRunning"> <strong>Apply Spell Correction ... </strong> <br> <div spin-circle style="width: 40px; height: 40px"></div> </div> <div class="scafold"> <span class="glyphicon glyphicon-info-sign"></span>Find meaningful <strong>Multiword Tags</strong>. </div> <div class="row" ng-include="\'views/composite.html\'"></div> </uib-tab> <uib-tab index="3" disable="ctrl.disabled[3]"> <uib-tab-heading style="color: #333"> <label class="pull-left">4</label> Polish and Reduce Size </uib-tab-heading> <div class="alert alert-info" style="text-align: center" ng-if="ctrl.compRunning"> <strong>Apply Multiword Tags ... </strong> <br> <div spin-circle style="width: 40px; height: 40px"></div> </div> <div class="scafold"> <span class="glyphicon glyphicon-info-sign"></span><strong>Finalize</strong> the dataset by using a set of important tags and salvaging information in non-important ones. </div> <div class="row" ng-include="\'views/postprocessing.html\'"></div> </uib-tab> <uib-tab index="4" disable="ctrl.disabled[4]" select="ctrl.output()"> <div class="alert alert-info" style="text-align: center" ng-if="ctrl.postRunning || ctrl.compRunning"> <strong>Updating Data ... </strong> <br> <div spin-circle style="width: 40px; height: 40px"></div> </div> <uib-tab-heading style="color: #333"> Result </uib-tab-heading> <div class="row" ng-controller="OverviewCtrl as ctrl" ng-include="\'views/overview.html\'"></div> </uib-tab> </uib-tabset>'),a.put("views/disconnected.html",'<div style="text-align: center; margin: 15% auto"> <h1 style="font-size: 50px">TagRefinery</h1> <div class="alert alert-warning"> <h3>Disconnected</h3> </div> <button class="btn btn-primary btn-lg" ng-click="ctrl.reconnect()"> Reconnect </button> </div>'),a.put("views/guided.html",'<div class="guidedInner"> <uib-progress max="90"><uib-bar ng-repeat="bar in ctrl.progress track by $index" value="bar.value" type="{{bar.type}}"><span ng-hide="bar.value < 1">{{bar.text | number: 0}}%</span></uib-bar></uib-progress> <div style="position: relative; top: -20px"><span style="position: absolute; left: 3%">Pre Filter</span><span style="position: absolute; left: 11%">|</span><span style="position: absolute; left: 35%">Refine Parameters</span><span style="position: absolute; left: 66.5%">|</span><span style="position: absolute; left: 78%">Polish and Reduce Size</span></div> <div id="guided4" style="margin-top: 30px"> <span ng-show="currentStep == -1" class="guidedQuestion">Workflow</span> <span ng-show="currentStep == 0" class="guidedQuestion">Pre Filter: Do you want to remove <span uib-tooltip="As example words which occur only once or twice in the dataset."><strong>rare words</strong></span> to reduce computation time?</span> <span ng-show="currentStep == 1" class="guidedQuestion">Do you want to import a list of <span uib-tooltip="Each word in the list will be removed from the dataset"><strong>words to remove</strong></span>?</span> <span ng-show="currentStep == 2" class="guidedQuestion">Do you want to import a list of <span uib-tooltip="Import your Dictionary with correct words here"><strong>tags</strong></span> as ground truth?</span> <span ng-show="currentStep == 3" class="guidedQuestion">Do you want to consolidate <span uib-tooltip="Like - favourite, favorite, favourites or favorites"><strong>word forms</strong></span> and reduce <span class="descMarker" uib-tooltip="Misspelled words like - necesary">spelling errors</span>?</span> <span ng-show="currentStep == 4" class="guidedQuestion">Do you want to find <span uib-tooltip="A tag might be composed of multiple words like - hard rock"><strong>multiword tags</strong></span> which appear very <span uib-tooltip="Frequent multiword tags are as example genres"><strong>often</strong></span>?</span> <span ng-show="currentStep == 5" class="guidedQuestion">Do you want to find <span uib-tooltip="A tag might be composed of multiple words like - hard rock"><strong>multiword tags</strong></span> which are <span uib-tooltip="Unique multiword tags are as example artist or band names"><strong>unique</strong></span>?</span> <span ng-show="currentStep == 6" class="guidedQuestion">What we have so far</span> <span ng-show="currentStep == 7" class="guidedQuestion">Do you want to reduce the size of the final set of tags by keeping only the highest quality tags?</span> <span ng-show="currentStep == 8" class="guidedQuestion">Do you want to <span class="descMarker" uib-tooltip="Resolving synonyms, translations, groups and remove non-informative tags">polish</span> your tags manually?</span> <span ng-show="currentStep == 9" class="guidedQuestion">Do you want to salvage those <span uib-tooltip="Remove bad words or translate words or resolve synonyms"><strong>polished tags</strong></span> from the unimportant tags?</span> <span ng-show="currentStep == 10" class="guidedQuestion">Results</span> </div> <br> <div ng-show="currentStep < 0"> <button ng-click="ctrl.start()" class="btn primaryColor" style="width: 200px">Start <span class="glyphicon glyphicon-ok"></span></button> </div> <div ng-show="currentStep >= 0"> <button ng-if=" !(currentStep == 6 || currentStep == 10)" class="btn btn-back" ng-click="ctrl.back()"><i class="fa fa-chevron-left" style="position: relative; top:-2px"></i></button> <div class="btn-group" ng-if="currentStep != 6 && currentStep != 10"> <button ng-if="!showStep" id="guided3" ng-click="ctrl.customize()" class="btn primaryColor" style="width: 150px">Yes <span class="fa fa-gear"></span></button> <button ng-if="showStep" ng-click="ctrl.customize()" class="btn primaryColor" style="width: 150px">Close <span class="fa fa-minus"></span></button> <button ng-if="currentStep < 6" id="guided0" ng-click="ctrl.default()" class="btn primaryColor" style="width: 150px">Use Default <span class="fa fa-play"></span></button> <button id="guided1" ng-click="ctrl.no()" class="btn secondaryColor" style="width: 150px">No <span class="fa fa-close"></span></button> </div> <br> <div class="btn-group" ng-if="showStep && !(currentStep == 6 || currentStep == 10)"> <button ng-click="ctrl.ok()" class="btn primaryColor" style="width: 200px">Apply <span class="glyphicon glyphicon-ok"></span></button> </div> <div class="btn-group" ng-if="currentStep == 6 || currentStep == 10"> <button ng-if="currentStep > 0" class="btn btn-back" ng-click="ctrl.back()"><i class="fa fa-chevron-left" style="position: relative; top:-2px"></i></button> <button ng-if="currentStep == 10" ng-click="ctrl.restartFinalize()" class="btn primaryColor">Change Selected Tags <span class="fa fa-flask"></span></button> <button id="result8" ng-if="currentStep < 9" ng-click="ctrl.restart()" class="btn primaryColor" style="width: 100px">Refine <span class="fa fa-compass"></span></button> <button id="result4" ng-if="currentStep < 9" ng-click="ctrl.goToLinked()" class="btn primaryColor" style="width: 100px">Overview <span class="fa fa-bar-chart"></span></button> <button id="result5" ng-click="ctrl.goToAdvanced()" class="btn primaryColor">Advanced Mode <span class="fa fa-list-alt"></span></button> </div> <button id="result10" ng-if="currentStep == 6" ng-click="ctrl.runAll()" class="btn secondaryColor" uib-tooltip="CAUTION: This may take a lot of time depending on the dataset!">Run without Pre Filter <span class="fa fa-clock-o"></span></button> <button id="result6" ng-if="currentStep == 6" ng-click="ctrl.ok()" class="btn secondaryColor pull-right" style="width: 300px">Polish and Reduce Size <span class="fa fa-flask"></span></button> </div> <hr> <div ng-show="currentStep < 0"> <img src="workflow.png" style="height: 600px"> </div> <div ng-show="currentStep >= 0"> <div class="row"> <div ng-if="currentStep == 0 && ctrl.initRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-if="currentStep == 3 && ctrl.preRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-if="currentStep == 4 && ctrl.spellRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-if="currentStep == 5 && ctrl.spellRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div class="col-sm-11"> <div> <div uib-collapse="!showStep" style="text-align: left" class="guidedInner"> <div style="position: relative"> <div ng-if="currentStep == 0 && ctrl.initRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-show="currentStep == 0"> <div class="row" ng-controller="PreprocessingfilterCtrl as ctrl" ng-include="\'views/preprocessing.filter.html\'"></div> </div> </div> <div ng-show="currentStep == 1"> <div class="row" ng-controller="PreprocessingimportCtrl as ctrl" ng-include="\'views/preprocessing.import.html\'"></div> </div> <div ng-show="currentStep == 2"> <div class="row" ng-controller="SpellcheckingimportCtrl as ctrl" ng-include="\'views/spellchecking.import.html\'"></div> </div> <div style="position: relative"> <div ng-if="currentStep == 3 && ctrl.preRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-show="currentStep == 3"> <div class="row" ng-controller="SpellcheckingsetCtrl as ctrl" ng-include="\'views/spellchecking.set.html\'"></div> </div> </div> <div style="position: relative"> <div ng-if="currentStep == 4 && ctrl.spellRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-show="currentStep == 4"> <div class="row" ng-controller="CompositefrequentCtrl as ctrl" ng-include="\'views/composite.frequent.html\'"></div> </div> </div> <div style="position: relative"> <div ng-if="currentStep == 5 && ctrl.spellRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-show="currentStep == 5"> <div class="row" ng-controller="CompositeuniqueCtrl	 as ctrl" ng-include="\'views/composite.unique.html\'"></div> </div> </div> <div style="position: relative"> <div ng-show="currentStep == 6"> <div class="row" ng-controller="OverviewCtrl as ctrl" ng-include="\'views/overview.html\'"></div> </div> </div> <div ng-show="currentStep == 7"> <div class="row" ng-controller="PostprocessingimportantCtrl as ctrl" ng-include="\'views/postprocessing.important.html\'"></div> </div> <div ng-show="currentStep == 8 || currentStep == 9"> <div class="row" ng-controller="PostprocessingreplaceCtrl as ctrl" ng-include="\'views/postprocessing.replace.html\'"></div> </div> <div style="position: relative"> <div ng-show="currentStep == 10"> <div class="row" ng-controller="OverviewCtrl as ctrl" ng-include="\'views/overview.html\'"></div> </div> </div> </div> </div> <div id="guided2" ng-if="!showStep"> <div ng-if="currentStep == 0" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Words</h2> <p>We start by separating all tags into single words and assessing the quality of the words. In a later stage there will be the opportunity to reconstruct <span class="descMarker" uib-tooltip="Like: Rock and Roll">multi-word</span> tags again.</p> <p style="font-weight: bold">By default, less than 5,000 words will be kept.</p> <p>A dataset with <strong>5,000 words</strong> takes around <strong>30 seconds</strong> to compute. A dataset with <strong>15,000 words</strong> takes around <strong>1.5 minutes</strong> to compute.</p> <p>One suggestion is to start with a small dataset to find good parameters, and then run the workflow on the complete dataset.</p> </div> </div> <div ng-if="currentStep == 1" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Blacklist</h2> <p>The default setting removes English <span class="descMarker" uib-tooltip="Like: a, and, or, ...">stop-words</span>, prepositions, and single characters. This reduces computation time and also helps eliminate awkward but frequent phrases such as of 10 stars and of the later on in multi-word tag detection.</p> <p>On the other hand, tags such as Rock and Roll will suffer from this step. You will have a chance to inspect and fix these in the final step.</p> </div> </div> <div ng-if="currentStep == 2" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Dictionary</h2> <p>By default a list of the <span class="descMarker" uib-tooltip="The General Service List is used.">3000 most used words </span>will be imported.</p> <p>Here, you can import your own domain specific lists to improve the quality of the spell correction algorithm. For instance, a list of genres for music.</p> <p>The list can contain both single-word and multi-word tags.</p> </div> </div> <div ng-if="currentStep == 3" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Spell Correction</h2> <p>This step is performed by replacing low <span class="descMarker" uib-tooltip="Computed from your initial weights">quality</span> words (below a certain threshold) with high quality ones that are similarly spelled. Two words are deemed similar if their similarity is higher than a threshold.</p> <p>Both quality and similarity are between 0 and 1. By default, a word quality of 0.05 and a similarity of 0.7 are chosen as thresholds.</p> </div> </div> <div ng-if="currentStep == 4" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Frequent Multiword Tags</h2> <p>Sequences of words that appear frequently are grouped into multi-word tags, such as "hard rock" and "female vocalists".</p> <p>Group frequency is between 0 and 1, with 0 meaning no occurrence and 1 meaning the most frequent group. By default, a value of 0.35 is used.</p> </div> </div> <div ng-if="currentStep == 5" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Unique Multiword Tags</h2> <p>Sequences of words that appear together frequently, but rarely by themselves, are grouped into multi-word tags, such as Jon Bon Jovi or bay area.</p> <p>Group strength is between 0 and 1, with 0 meaning the words are never together and 1 meaning the words are most often together. By default, a value of 0.35 is used.</p> </div> </div> <div ng-if="currentStep == 7" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Final Filtering</h2> <p>Narrow your dataset to a final size depending on your intended use for the tags.</p> </div> </div> <div ng-if="currentStep == 8" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Tag Polishing</h2> <p>In this step you can manually inspect your final dataset and fix problems. You can remove undesirable tags, such as subjective or non-informative terms. You can also replace tags them with other tags (such as fixing synonyms, translations, etc.).</p> </div> </div> <div ng-if="currentStep == 9" class="guidedExplanation"> <div class="well well-large center" style="width: 600px"> <h2>Salvage</h2> <p>The salvager goes through all the tags that have been previously removed and looks for informative tags within them. </p> <p>For instance, if rock is in your final dataset and some weird rock is not, the salvager will turn the latter into rock. By performing this step, the amount of information we have on the items in your library (songs, papers, etc.) can increase significantly.</p> </div> </div> </div> </div> <div class="col-sm-1" style="margin-top: -20px; border-left: 1px solid rgba(51, 51, 51, 0.21); position: relative; height: 72vh"> <div uib-collapse="currentStep <= 0 && !ctrl.isIntermediate" style="margin-top: 25px"> <button ng-click="ctrl.jumpTo(0)" class="well well-sm sidebar"> Remaining Words After Pre Filter: <strong>{{ctrl.vocabCount[\'Original\'] - ctrl.pre["Number of Filtered Words"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 1 && !ctrl.isIntermediate"> <button ng-click="ctrl.jumpTo(1)" class="well well-sm sidebar"> Imported Blacklisted Words: <strong>{{ctrl.pre["Number of blacklisted Words"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 2 && !ctrl.isIntermediate"> <button ng-click="ctrl.jumpTo(2)" class="well well-sm sidebar"> Imported Ground Truth Words: <strong>{{ctrl.spell["Number of Dictionary Words"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 3 && !ctrl.isIntermediate"> <button ng-click="ctrl.jumpTo(3)" class="well well-sm sidebar"> Number of additional Ground Truth Words: <strong>{{ctrl.spell["Number of Additional Ground Truth Words"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 3 && !ctrl.isIntermediate"> <button ng-click="ctrl.jumpTo(3)" class="well well-sm sidebar"> Number of Replacements in Spell Correction: <strong>{{ctrl.spell["Number of Replacements"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 4 && !ctrl.isIntermediate"> <button ng-click="ctrl.jumpTo(4)" class="well well-sm sidebar"> Frequent Groups: <strong>{{ctrl.comp["Number of Frequent Groups"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 5 && !ctrl.isIntermediate"> <button ng-click="ctrl.jumpTo(5)" class="well well-sm sidebar"> Unique Groups: <strong>{{ctrl.comp["Number of Unique Groups"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 7 && !ctrl.isFinal"> <button ng-click="ctrl.jumpTo(7)" class="well well-sm sidebar"> Selected Tag Set Size: <strong>{{ctrl.post["Number of Important Tags"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 8 && !ctrl.isFinal"> <button ng-click="ctrl.jumpTo(8)" class="well well-sm sidebar"> Manually Replaced Tags: <strong>{{ctrl.post["Replaced Tags"]}}</strong> <br> Manually Removed Tags: <strong>{{ctrl.post["Removed Tags"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 9 && !ctrl.isFinal"> <button ng-click="ctrl.jumpTo(8)" class="well well-sm sidebar"> Salvaged Tags: <strong>{{ctrl.post["Salvaged Tags"]}}</strong> </button> </div> <div uib-collapse="currentStep <= 9 && !ctrl.isFinal"> <button ng-click="ctrl.jumpTo(9)" class="well well-sm sidebar"> Final <br> Size of Tag Set: <strong>{{ctrl.vocabCount["Final"]}}</strong> <br> Number of Tag/Item Pairs: <strong>{{ctrl.datasetCount["Final"]}}</strong> </button> </div> </div> </div> </div> </div>'),a.put("views/hist.html",'<label style="font-size: smaller; position: absolute; margin-top: 4px; right: 75px"> # bins: <input ng-change="updateBins()" ng-model="binCount" type="number" min="0" style="font-size: smaller; width: 40px"> </label> <button ng-disabled="!isZoomed" style="position:absolute;margin-top:0px;right:30px" class="btn btn-default btn-sm round" ng-click="reset()" uib-tooltip="Zoom out"> <span class="glyphicon glyphicon-zoom-out"></span> </button>'),a.put("views/import.html",'<div> <h2 style="text-align: center">TagRefinery</h2> <button ng-click="ctrl.goToStart()" class="btn btn-helper" style="position: absolute; top: 5px; left: 0" uib-tooltip="Back to the Start Screen" tooltip-placement="right"><span class="fa fa-home"></span></button> <button ng-show="false" class="btn btn-helper" ng-click="CallMe();" uib-tooltip="Shows the Introduction for this Page" tooltip-placement="left"> <i id="start3" class="fa fa-film"></i> </button> <hr> <div style="text-align: center; margin-top: 5%" class="test"> <h3>Import Data</h3> <div id="import1"> <upload-button get-file="ctrl.getFile(file)" uib-tooltip="Upload File"></upload-button> </div> <div class="btn-group" id="import3" style="display: inline-block"> <button class="btn secondaryColor" style="width: 100px" ng-click="ctrl.clear()" uib-tooltip="Clear Import" ng-disabled="dataI.length<1"> Clear <span class="fa fa-trash"></span></button> <button uib-tooltip="Apply Import" type="button" style="width: 100px" class="btn secondaryColor" ng-click="ctrl.import()" ng-disabled="dataI.length<1 || !ctrl.touched"> Apply <span class="fa fa-check"></span> </button> </div> <div id="import2" ui-grid="gridOptions" ui-grid-importer ui-grid-edit class="inner" style="text-align: left"></div> <div class="well inner"> <p> Import one or multiple files by adding them with Select File <span class="fa fa-upload"></span> and send it to the server by pressing Apply <span class="fa fa-check"></span>. <br> The file needs to be a csv file with exact the same column headers shown in the grid as headers in the csv file. <br> Apply <span class="fa fa-check"></span> normalizes the input tags: turns them to lower case and merges multiple spaces into one. <br> </p> </div> </div> </div>'),a.put("views/linked.html",'<div ng-controller="LinkedCtrl as ctrl" class="guidedInner"> <div class="row"> <h3 style="margin-top: -15px">Refine your Parameters</h3> <div class="col-sm-8"> <div style="position: relative"> <div uib-collapse="!ctrl.showPrefilter"> <div ng-if="ctrl.initRunning" class="overlay"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div ng-if="ctrl.showPrefilter" d3-hist data="ctrl.preData" call-back="ctrl.getPre(threshold)" threshold="ctrl.newPre" is-float="false" from-right="false" bins="18" svg-height="240" type-label="Number of Occurrences" y-label="Number of Words" title="Remove Rare Words"></div> </div> <div ng-if="ctrl.preRunning" class="overlay"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div id="linked2" ng-if="ctrl.linked" d3-hist data="ctrl.spellData" threshold="ctrl.newSpellI" bins="18" svg-height="200" type-label="Word Quality" y-label="Number of Words" call-back="ctrl.getSpellI(threshold)" title="Word quality threshold for spell-correction"></div> <div id="linked3" class="taskInner similarity" d3-slider ng-if="ctrl.linked" value="ctrl.newSpellS" call-back="ctrl.getSlider(value)" domain="ctrl.spellDomain" xlabel="Similarity threshold for spell-correction"></div> </div> <div style="position: relative"> <div ng-if="ctrl.spellRunning" class="overlay"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> <div id="linked4" ng-if="ctrl.linked" d3-hist data="ctrl.compDataF" call-back="ctrl.getCompF(threshold)" threshold="ctrl.newCompF" bins="18" svg-height="240" type-label="Group Strength" y-label="Count" title="Frequent Multiword Groups"></div> <div id="linked5" ng-if="ctrl.linked" d3-hist data="ctrl.compDataU" call-back="ctrl.getCompU(threshold)" threshold="ctrl.newCompU" bins="18" svg-height="240" type-label="Group Strength" y-label="Count" title="Unique Multiword Groups"></div> </div> </div> <div class="col-sm-4" style="position: relative"> <div class="row" style="margin-bottom: 2px"> <button class="btn btn-group-justified primaryColor" ng-model="ctrl.showPrefilter" uib-btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false" style="text-align: left">Pre Filter</button> </div> <div id="linked8" class="row"> <button style="text-align: left" class="btn btn-group-justified secondaryColor" ng-click="ctrl.goToResult()">Guided Mode</button> </div> <div id="linked6" class="row"> <div class="col-sm-3"> <h5 style="text-align: center">In</h5> <hr> <p ng-class="{ \'highlight\': ctrl.datasetInChanged }">Number of Annotated Items: <strong style="font-size: medium">{{ctrl.datasetIn}}</strong></p> <br> <br> <p ng-class="{ \'highlight\': ctrl.vocabInChanged }">Number of Tags: <strong style="font-size: medium">{{ctrl.vocabIn}}</strong></p> </div> <div class="col-sm-3"> <h5 style="text-align: center">Spell Correct</h5> <hr> <div ng-class="{ \'highlight\': ctrl.spellChanged }"> Number of Ground Truth Words: <strong style="font-size: medium">{{ctrl.spellTruth}}</strong> <br> <br> Number of Replacements: <strong style="font-size: medium">{{ctrl.getReplacementCount()}}</strong> </div> </div> <div class="col-sm-3"> <h5 style="text-align: center">Multiword</h5> <hr> <div ng-class="{ \'highlight\': ctrl.compChanged }"> Number of Frequent Groups: <strong style="font-size: medium">{{ctrl.getCompFCount()}}</strong> <br> <br> Number of Unique Groups: <strong style="font-size: medium">{{ctrl.getCompUCount()}}</strong> </div> </div> <div class="col-sm-3"> <h5 style="text-align: center">Out</h5> <hr> <p ng-class="{ \'highlight\': ctrl.datasetOutChanged }">Number of Annotated Items: <strong style="font-size: medium">{{ctrl.datasetOut}}</strong></p> <br> <br> <p ng-class="{ \'highlight\': ctrl.vocabOutCHanged }">Number of Tags before final filtering: <strong style="font-size: medium">{{ctrl.vocabOut}}</strong></p> </div> </div> <div class="row" style="position: relative"> <h4 style="text-align: center">Tags</h4> <div class="row"> <span class="pull-left" style="margin-left: 15px"><strong style="background-color: rgba(50, 121, 183, 0.2)">Blue:</strong> Tags added after last modification</span><br> <span class="pull-left" style="margin-left: 15px"><strong style="background-color: rgba(127, 0, 0, 0.3)">Red:</strong> Tags removed after last modification</span> </div> <div id="linked7" style="text-align: left; height: 475px" ng-if="ctrl.linked" ui-grid="ctrl.vocabGrid" ui-grid-selection ui-grid-resize-columns ui-grid-exporter> <div ng-if="ctrl.compRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> </div> </div> </div> </div> </div>'),
a.put("views/main.html",'<div ng-intro-options="introCurrent" ng-intro-method="CallMe" ng-intro-autostart="false" ng-intro-autorefresh="true" style="width: 98%"> <div ng-include="\'views/start.html\'" ng-if="ctrl.connectionStatus && !ctrl.showWorkflow && !ctrl.showImport"></div> <div ng-include="\'views/import.html\'" ng-if="ctrl.showImport && ctrl.connectionStatus"></div> <div ng-include="\'views/disconnected.html\'" ng-if="!ctrl.connectionStatus"></div> <div ng-include="\'views/workflow.html\'" ng-show="ctrl.showWorkflow && ctrl.connectionStatus"></div> </div>'),a.put("views/overview.html",'<div class="row"> <div ng-class="active == 4 ? \'col-sm-7\': \'col-sm-12\'" style="text-align: center"> <div class="row taskInner"> <uib-tabset active="activeJustified" justified="true"> <uib-tab index="0" heading="Dataset (Tag/Item)"> <div class="row"> <button class="btn btn-default pull-right" ng-click="ctrl.exportCSV()">Export <i class="fa fa-download"></i></button> <p style="text-align: left; position: relative;bottom: -15px; margin-bottom: 0; margin-left: 15px"> <span style="color: #333; background-color: rgba(51, 110, 171, 0.31); font-weight: bold">Blue</span>: Changed Tags </p> </div> <div id="result1" style="text-align: left; height: 500px" ui-grid="ctrl.grid" ui-grid-auto-resize ui-grid-selection ui-grid-resize-columns ui-grid-exporter> <div ng-if="ctrl.compRunning || ctrl.postRunning" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> </div> <div ng-show="ctrl.showHistory"> <h4>History</h4> <div id="result2"> <table class="table"> <thead> <tr> <th>Raw Tag</th> <th>Preprocess</th> <th>Spellcorrect</th> <th>Multiword</th> <th>Postprocess</th> </tr> </thead> <tbody id="history"> <tr ng-repeat="x in ctrl.history"> <td>{{ x.original }}</td> <td>{{ x.pre }}</td> <td>{{ x.spell }}</td> <td>{{ x.composite }}</td> <td>{{ x.post }}</td> </tr> </tbody> </table> </div> </div> </uib-tab> <uib-tab index="1" heading="Tag View"> <div style="text-align: left; height: 500px" ui-grid="ctrl.vocab" ui-grid-auto-resize ui-grid-resize-columns ui-grid-exporter> <div ng-if="ctrl.compRunning || ctrl.postRunning" class="overlay"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> </div> </uib-tab> <uib-tab index="2" heading="Item View"> <div style="text-align: left; height: 500px" ui-grid="ctrl.group" ui-grid-grouping ui-grid-auto-resize ui-grid-resize-columns ui-grid-exporter> <div ng-if="ctrl.compRunning || ctrl.postRunning" class="overlay"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> </div> </uib-tab> </uib-tabset> </div> </div> <div id="result3" class="col-sm-5" ng-if="active == 4"> <div class="row"> <div class="col-sm-6"> <h4> Dataset Statistics </h4> <table class="table" style="width:95%"> <tbody> <th>Number of Words</th> <tr ng-repeat="(key, value) in ctrl.vocabCount"> <td>{{ key }}</td> <td style="font-weight: bold; font-size: medium">{{ value }}</td> </tr> <th>Dataset Size</th> <tr ng-repeat="(key, value) in ctrl.datasetCount"> <td>{{ key }}</td> <td style="font-weight: bold; font-size: medium">{{ value }}</td> </tr> </tbody> </table> </div> <div class="col-sm-6" style="border-left: 1px solid rgba(51, 51, 51, 0.21); position: relative; height: 70vh"> <h4> Workflow Statistics </h4> <table class="table" style="width:95%"> <tbody> <th>Preprocessing</th> <tr ng-repeat="(key, value) in ctrl.pre"> <td>{{ key }}</td> <td style="font-weight: bold; font-size: medium">{{ value }}</td> </tr> <th>Spell-correct</th> <tr ng-repeat="(key, value) in ctrl.spell"> <td>{{ key }}</td> <td style="font-weight: bold; font-size: medium">{{ value }}</td> </tr> <th>Multiword Tags</th> <tr ng-repeat="(key, value) in ctrl.comp"> <td>{{ key }}</td> <td style="font-weight: bold; font-size: medium">{{ value }}</td> </tr> <th>Finalize</th> <tr ng-repeat="(key, value) in ctrl.post" ng-show="ctrl.state == \'Finalize\'"> <td>{{ key }}</td> <td style="font-weight: bold; font-size: medium">{{ value }}</td> </tr> </tbody> </table> </div> </div> </div> </div>'),a.put("views/postprocessing.html",'<div class="scafold"> <uib-accordion> <uib-accordion-group is-open="status.open[3]" panel-class="panel-advanced"> <uib-accordion-heading> <div class="descriptionHeaderAdvanced"> Advanced - Parameters <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[3], \'glyphicon-chevron-right\': !status.open[3]}"></i> <br> <p class="descriptionText">Set the min word length for salvaging and composite split parameters</p> </div> </uib-accordion-heading> <div class="row" ng-controller="PostprocessingparamsCtrl as ctrl" ng-include="\'views/postprocessing.params.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[0]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Final Filtering <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[0], \'glyphicon-chevron-right\': !status.open[0]}"></i> <br> <p class="descriptionText">Create the final set of tags</p> </div> </uib-accordion-heading> <div class="row" ng-controller="PostprocessingimportantCtrl as ctrl" ng-include="\'views/postprocessing.important.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[1]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Edit the filtered tags <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[1], \'glyphicon-chevron-right\': !status.open[1]}"></i> <br> <p class="descriptionText">Review and edit the final set of tags</p> </div> </uib-accordion-heading> <div class="row" ng-controller="PostprocessingreplaceCtrl as ctrl" ng-include="\'views/postprocessing.replace.html\'"></div> </uib-accordion-group> </uib-accordion> </div>'),a.put("views/postprocessing.important.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Keep the highest quality tags and remove the rest</span><br> </div> <div class="alert alert-info" ng-show="ctrl.info"> Word above the selected threshold are important. All words below are subject to the salvaging process. </div> </div> <div class="row taskInner"> <div class="col-sm-9"> <div id="postF1" ng-if="status.open[0] || (currentStep == 7 && showStep)" d3-hist data="ctrl.data" call-back="ctrl.getThreshold(threshold)" threshold="ctrl.newThreshold" bins="24" svg-height="400" type-label="Tag Quality" y-label="Number of Words"></div> <div style="margin-left: 70px"> <p>Threshold: <strong style="font-size: large">{{ctrl.newThreshold | number:4 }}</strong></p> <p>Number of important Tags: <strong style="font-size: large">{{ ctrl.count }}</strong></p> </div> </div> <div class="col-sm-3"> <div class="postImportant" style="height: 500px" ui-grid="ctrl.grid" ui-grid-selection ui-grid-resize-columns ui-grid-exporter ng-if="status.open[0] || (currentStep == 7 && showStep)"></div> </div> </div>'),a.put("views/postprocessing.params.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Advanced Parameters</span><br> For more details click onto the info button on the left </div> <div class="alert alert-info" ng-show="ctrl.info"> <strong>Min Word Length</strong> All words below the choosen minimum word length will be salvaged with the conservative salvager and all <br> above with the greedy salvager. <strong>Split Composite</strong> If this parameter is true, composite words like "hard-rock song" will be split. <strong>Use All Words</strong> If this parameter is true, all words will be used and not only the filtered ones. <br> False means, only filtered words will be in the final dataset. </div> </div> <!--Task Parameters and details--> <div class="row taskInner"> <div class="col-sm-12" style="text-align: left"> <form name="ctrl.params"> <h5> <label> Min Word Length: <input type="number" ng-model="ctrl.newMinWordLength" uib-tooltip="What is the minimum word length for greedy salvaging?"> </label> <br> <label> Split Composite Tags: <input type="checkbox" ng-model="ctrl.newSplit" uib-tooltip="Should multiword tags be split?"> </label> <br> <label> Use All Words: <input type="checkbox" ng-model="ctrl.newUseAllWords" uib-tooltip="Should all words be used or only the filtered ones?"> </label> </h5> </form> </div> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.params.$dirty"> <span class="fa fa-undo"></span> </button> </div> </div>'),a.put("views/postprocessing.replace.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Edit Important Tags</span><br> Edit tags by double clicking if necessary </div> <div class="alert alert-info" ng-show="ctrl.info"> This is the last place to make changes to the used tags. After you press apply, the system searches for the important tags in the non-important tags. <br> <br> The left grid displays the final set of important tags. <br> After computing the salvaging the right grid displays all salvaged tags. </div> </div> <!--Task content--> <div class="row" style="margin-left: 70px"> <span><strong style="background-color: rgba(50, 121, 183, 0.2)">Blue:</strong> Changed Tag;</span> <span><strong style="background-color: rgba(127, 0, 0, 0.3)">Red:</strong> Removed Tag</span> </div> <div id="postS1" ng-if="status.open[1] || (currentStep == 8 && showStep)" ui-grid="ctrl.edit" ui-grid-edit ui-grid-cellnav ui-grid-exporter class="taskInner"></div> <div class="row taskInner" style="margin-top: 10px"> <p>Number of Replaced Tags: <strong style="font-size: large">{{ctrl.replaceCount()}}</strong></p> <p>Number of Removed Tags: <strong style="font-size: large">{{ctrl.removeCount()}}</strong></p> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button id="postS6" class="btn btn-undo round" uib-tooltip="Clear all" ng-click="ctrl.clearAll()" ng-if="true"> <span class="fa fa-trash"></span> </button> <button id="postS3" class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.touched"> <span class="fa fa-undo"></span> </button> <button ng-if="!currentStep == 8 || active == 3" ng-disabled="ctrl.postRunning" id="postS4" class="btn btn-primary round" uib-tooltip="Apply changes" ng-click="ctrl.apply()"> <span class="glyphicon glyphicon-play"></span> </button> </div> </div>'),a.put("views/preprocessing.filter.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Select a threshold on number of occurrences of words</span> <br> Words below or equal the threshold will be removed from the rest of the work-flow </div> <div class="alert alert-info" ng-show="ctrl.info"> The filter allows you to remove words below or equal to the occurrence threshold. <br> Single words are used instead of tags. The reason is that word combinations are far less frequent <br> and most of the tags would have a occurrence of 1. <br><br> A threshold of 2 means that a need to have at least 2 occurrences to stay in the dataset. <br> <p>This should be used if the dataset is too big to be computed in a reasonable time.</p> </div> </div> <!--Task content--> <div class="row taskInner" style="position: relative"> <div id="preF1" ng-if="status.open[0] || (currentStep == 0 && showStep)" d3-hist data="ctrl.data" call-back="ctrl.getOccurrences(threshold)" threshold="ctrl.newOccurrences" is-float="false" from-right="false" bins="24" svg-height="400" type-label="Number of Occurrences" y-label="Number of Words"></div> </div> <!--Task Parameters and details--> <div class="row taskInner"> <div id="preF2" class="col-sm-6" style="text-align: left"> <div style="margin-left: 70px"> <p uib-tooltip="All words below the selected number of occurrences will be removed."><label> Threshold: <input ng-change="ctrl.touched = true;" type="number" min="0" ng-model="ctrl.newOccurrences" style="width: 50px; font-size: large"> </label> Occurrences</p> <p>Number of remaining words: <strong style="font-size: large">{{ ctrl.totalCount() - ctrl.newCount() }}</strong></p> <p>Total number of words: <strong style="font-size: large">{{ ctrl.totalCount() }}</strong></p> </div> </div> <div id="preF3" class="col-sm-6" style="text-align: right"> <button class="btn btn-default" ng-model="ctrl.showDetails" ng-click="ctrl.openGrid()" uib-btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false" uib-tooltip="Show detailed information"> Inspect Words </button> </div> </div> <!--Task advanced content--> <div ng-if="ctrl.showDetails" class="taskInner"> <p style="text-align: left; position: relative;bottom: 2px; margin-bottom: -5px"> <span style="color: #333; font-weight: bold; background-color: rgba(127, 0, 0, 0.3)">Red</span>: Words which will be removed </p> <div id="preFscroll" ui-grid="ctrl.grid" ui-grid-selection ui-grid-resize-columns ui-grid-exporter></div> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.touched"> <span class="fa fa-undo"></span> </button> </div> </div>'),a.put("views/preprocessing.html",'<div class="scafold"> <uib-accordion> <uib-accordion-group is-open="status.open[1]" panel-class="panel-advanced"> <uib-accordion-heading> <div class="descriptionHeaderAdvanced"> Advanced - Remove Characters <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[1], \'glyphicon-chevron-right\': !status.open[1]}"></i> <br> <p class="descriptionText">Remove characters from the dataset</p> </div> </uib-accordion-heading> <div class="row" ng-controller="PreprocessingremoveCtrl as ctrl" ng-include="\'views/preprocessing.remove.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[2]" panel-class="panel-advanced"> <uib-accordion-heading> <div class="descriptionHeaderAdvanced"> Advanced - Replace Characters <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[2], \'glyphicon-chevron-right\': !status.open[2]}"></i> <br> <p class="descriptionText">Replace characters in the dataset</p> </div> </uib-accordion-heading> <div class="row" ng-controller="PreprocessingreplaceCtrl as ctrl" ng-include="\'views/preprocessing.replace.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[0]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Pre Filter <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[0], \'glyphicon-chevron-right\': !status.open[0]}"></i> <br> <p class="descriptionText">Filter unimportant words right before the whole pipeline. This increases performance.</p> </div> </uib-accordion-heading> <div class="row" ng-controller="PreprocessingfilterCtrl as ctrl" ng-include="\'views/preprocessing.filter.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[3]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Import Blacklist <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[3], \'glyphicon-chevron-right\': !status.open[3]}"></i> <br> <p class="descriptionText">Import words which should be removed from the dataset- such as stopwords..</p> </div> </uib-accordion-heading> <div class="row" ng-controller="PreprocessingimportCtrl as ctrl" ng-include="\'views/preprocessing.import.html\'"></div> </uib-accordion-group> </uib-accordion> </div>'),a.put("views/preprocessing.import.html",'<div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Import Black List</span><br> Import a csv file with "Word" as header and one word per line. </div> <div class="alert alert-info" ng-show="ctrl.info"> Each imported word will be removed from the whole dataset. <br> Note that this happens before spell-correct and does not affect wrong spelled versions <br> of the word. </div> </div> <!--Task content--> <div ng-if="status.open[3] || (currentStep == 1 && showStep)" style="text-align: center"> <upload-button id="preB2" get-file="ctrl.getFile(file)" uib-tooltip="Select File"></upload-button> <button id="preB3" class="btn btn-danger" ng-click="ctrl.clear()" uib-tooltip="Clear Import" ng-disabled="dataBlacklist.length<1">Clear</button> </div> <div id="preB1" ng-if="status.open[3] || (currentStep == 1 && showStep)" ui-grid="gridOptions" ui-grid-importer ui-grid-edit class="taskInner"></div>'),a.put("views/preprocessing.remove.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Remove Characters</span> <br> </div> <div class="alert alert-info" ng-show="ctrl.info"> All characters in this text field will be removed from all tags in the dataset. </div> </div> <!--Task Parameters and details--> <div class="row taskInner"> <div class="col-sm-12" style="text-align: left"> <form name="ctrl.params"> <h5> <label> Characters to remove: <input name="remove" ng-model="ctrl.newRemove" uib-tooltip="CAUTION: each character in the input field will be removed!"> </label> </h5> </form> </div> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.params.$dirty"> <span class="fa fa-undo"></span> </button> </div> </div>'),a.put("views/preprocessing.replace.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Replace Characters</span><br> </div> <div class="alert alert-info" ng-show="ctrl.info"> Only single characters replacements are allowed. Use this to reduce the complexity of the whole tag space. </div> </div> <!--Task Parameters and details--> <div class="row taskInner"> <div class="col-sm-12" style="text-align: left"> <h5> <form name="that.replacement"> <label> Replace: <input ng-maxlength="1" name="word" ng-model="ctrl.word" uib-tooltip="Character to be replaced."> </label> <label> by: <input ng-maxlength="1" name="by" ng-model="ctrl.by" uib-tooltip="The replacing character"> </label> <button class="btn btn-primary" ng-disabled="that.replacement.word.$invalid || that.replacement.by.$invalid" ng-click="ctrl.add()" style="margin-left:5px">Add </button> <span ng-show="that.replacement.word.$invalid"> Only characters can be replaced!</span> <span ng-show="that.replacement.by.$invalid"> It can only be replaced by one character!</span> </form> </h5> <h4> Replacements </h4> <table class="table"> <thead> <tr> <th>Replace</th> <th>By</th> <th>Remove</th> </tr> </thead> <tbody> <tr ng-repeat="x in ctrl.replace" id="{{$index}}"> <td>{{ x.replace }}</td> <td>{{ x.by }}</td> <td> <button class="btn btn-danger btn-xs" ng-click="ctrl.remove()"><span class="glyphicon glyphicon-trash"></span> </button> </td> </tr> </tbody> </table> </div> </div>'),a.put("views/spellchecking.html",'<div class="scafold"> <uib-accordion> <uib-accordion-group is-open="status.open[3]" panel-class="panel-advanced"> <uib-accordion-heading> <div class="descriptionHeaderAdvanced"> Advanced - Parameters <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[3], \'glyphicon-chevron-right\': !status.open[3]}"></i> <br> <p class="descriptionText">Set the minimum word length for replacements.</p> </div> </uib-accordion-heading> <div class="row" ng-controller="SpellcheckingparamsCtrl as ctrl" ng-include="\'views/spellchecking.params.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[2]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Import Dictionary <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[2], \'glyphicon-chevron-right\': !status.open[2]}"></i> <br> <p class="descriptionText">Import ground truth dictionary.</p> </div> </uib-accordion-heading> <div class="row" ng-controller="SpellcheckingimportCtrl as ctrl" ng-include="\'views/spellchecking.import.html\'"></div> </uib-accordion-group> <uib-accordion-group is-open="status.open[1]" panel-class="panel-simple"> <uib-accordion-heading> <div class="descriptionHeader"> Configure spell corrector <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status.open[0], \'glyphicon-chevron-right\': !status.open[0]}"></i> <br> <p class="descriptionText">Reduce spelling errors and different word forms</p> </div> </uib-accordion-heading> <div class="row" ng-controller="SpellcheckingsetCtrl as ctrl" ng-include="\'views/spellchecking.set.html\'"></div> </uib-accordion-group> </uib-accordion> </div>'),a.put("views/spellchecking.import.html",'<div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Import Ground Truth Tags</span><br> Import a csv file with "Tag" as header and one word per line. </div> <div class="alert alert-info" ng-show="ctrl.info"> Each word in this list will be treated as correct word. <br> Each word group will be treated as correct group. </div> </div> <!--Task content--> <div ng-if="status.open[2] || (currentStep == 2 && showStep)" style="text-align: center"> <upload-button id="spellT2" get-file="ctrl.getFile(file)" uib-tooltip="Select File"></upload-button> <button id="spellT3" class="btn btn-danger" ng-click="ctrl.clear()" uib-tooltip="Clear Import" ng-disabled="dataS.length<1">Clear</button> </div> <div id="spellT1" ng-if="status.open[2] || (currentStep == 2 && showStep)" ui-grid="gridOptions" ui-grid-importer ui-grid-edit class="taskInner"></div>'),a.put("views/spellchecking.params.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="ctrl.info" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Select Advanced Parameters</span><br> For detailed information click on the left info button. </div> <div class="alert alert-info" ng-show="ctrl.info"> <strong>Minimum Word Length</strong> This parameter defines what the minimum word length for replacements is. <br> Words below that length will be ignored in the process of spell correction. </div> </div> <!--Task Parameters and details--> <div class="row taskInner"> <div class="col-sm-12" style="text-align: left"> <form name="ctrl.params"> <h5><label> Minimum Word Length: <input name="minWordSize" type="number" ng-model="ctrl.newMinWordSize" uib-tooltip="What is the minimum word length where replacements will be applied."> </label></h5> </form> </div> </div> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.params.$dirty"> <span class="fa fa-undo"></span> </button> </div> </div>'),a.put("views/spellchecking.set.html",'<div class="row taskInner"> <div class="col-sm-6"> <button class="btn btn-link infoButton" ng-model="ctrl.infoI" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Add tags to the ground truth list</span><br> Choose a threshold on word quality to distinguish a group of tags as ground truth </div> <div class="alert alert-info" ng-show="ctrl.infoI"> Each word has a word quality which is computed from your tag weight. <br> 1 means most important and 0 not important at all. <br><br> Everything above the selected threshold will be treated as correct and will not be touched. <br><br> In the <b>Inspect Words</b> dialog shows the left grid the whole vocabulary and after clicking on <br> on word - the right one shows all possible replacements. The green words are above the selected <br> tag quality and the blue words will be replaced at the current similarity value. </div> </div> <div class="col-sm-6" style="text-align: right"> <div style="display: inline-block"> <span class="taskTitle">Modify minimum degree of similarity for replacements</span><br> Choose a value for spelling similarity, above which two tags will be considered the same. </div> <button class="btn btn-link infoButton" ng-model="ctrl.infoS" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div class="alert alert-info" ng-show="ctrl.infoS"> The value displays the similarity from 0 (completely different) to 1 (the same). </div> </div> </div> <div class="row taskInner"> <div class="col-sm-6"> <div id="spellC0" class="importance" d3-slider ng-if="status.open[1] || (currentStep == 3 && showStep)" name="importance" value="ctrl.newImportance" call-back="ctrl.getNewImportance(value)" domain="ctrl.domain" xlabel="Word Quality"></div> </div> <div class="col-sm-6"> <div id="spellC4" class="similarity" d3-slider ng-if="status.open[1] || (currentStep == 3 && showStep)" name="similarity" value="ctrl.newSimilarity" call-back="ctrl.slider(value)" domain="ctrl.domain" xlabel="Similarity"></div> </div> </div> <div class="taskInner row"> <div class="col-sm-1" style="text-align: right"> <div id="spellC2"> <p>Suggested default threshold: <strong style="font-size: large">0.70</strong></p> <p>Current threshold: <strong style="font-size: large">{{ ctrl.newImportance | number:2}}</strong></p> <p>Number of ground truth words: <strong style="font-size: large">{{ctrl.countGroundTruth() | number:0 }}</strong></p> </div> </div> <div class="col-sm-10"> <div class="row"> <div class="col-sm-4"> <h4 style="text-align: center">All Words</h4> <div class="row" style="margin-left: 0px"> <span><strong style="background-color: rgba(50, 121, 183, 0.2)">Blue:</strong> Words considered as ground truth</span><br> </div> <div ng-if="status.open[1] || (currentStep == 3 && showStep)" ui-grid="ctrl.grid" ui-grid-selection ui-grid-resize-columns ui-grid-exporter class="grid" style="height: 600px"></div> </div> <div class="col-sm-8"> <h4 style="text-align: center">All pairs of similar words</h4> <div class="row" style="margin-left: 0px"> <span><strong style="background-color: rgba(127, 0, 0, 0.3)">Red:</strong> Accepted Replacements</span> <span class="pull-right" style="margin-right: 15px">Click the bars to set the corresponding threshold.</span> </div> <div ng-if="status.open[1] || (currentStep == 3 && showStep)" ui-grid="ctrl.replGrid" ui-grid-cellnav ui-grid-selection ui-grid-resize-columns ui-grid-exporter class="grid" style="height: 600px"> <div ng-if="ctrl.loading" class="overlay" style="text-align: center"> <div class="overlayInner" spin-rect style="width: 80px; height: 80px"></div> </div> </div> </div> </div> </div> <div class="col-sm-1"> <div id="spellC3" style="text-align: justify"> <p>Suggested default threshold: <strong style="font-size: large">0.85</strong></p> <p>Current threshold: <strong style="font-size: large">{{ ctrl.newSimilarity | number:2}}</strong></p> <p>Number of replacements: <strong style="font-size: large">{{ ctrl.getReplacementCount() }}</strong></p> </div> </div> </div> <hr> <div class="row taskInner"> <div class="col-sm-12" style="text-align: right"> <button class="btn btn-undo round" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.touched"> <span class="fa fa-undo"></span> </button> </div> </div>'),a.put("views/start.html",'<div style="text-align: center; margin: 15% auto"> <button ng-show="false" class="btn btn-helper" ng-click="CallMe()" uib-tooltip="Shows the Introduction for this Page" tooltip-placement="left"> <i id="start4" class="fa fa-film"></i> </button> <img src="logo.png" style="width: 500px"> <br> <span>Find the most important <strong>Tags</strong> in your dataset!</span> <br> <div class="row" style="margin-top: 20px"> <span style="font-size: x-large">Start:</span> <button style="margin-right: 2px; width: 175px" id="start2" uib-tooltip="Guided run with default values" ng-if="!ctrl.running" ng-disabled="!ctrl.dataLoaded" class="btn btn-lg primaryColor" ng-click="ctrl.startWithDefaults()">Guided <span class="fa fa-compass"></span></button> <button id="start3" style="width: 175px" uib-tooltip="Unguided dashboard" ng-if="!ctrl.running" ng-disabled="!ctrl.dataLoaded" class="btn btn-lg primaryColor" ng-click="ctrl.showAdvancedView()"> Advanced <span class="fa fa-list-alt"></span></button> <button id="update1" style="width: 200px" uib-tooltip="Reconnect to the active Season" ng-if="ctrl.running" class="btn btn-lg primaryColor" ng-click="ctrl.reconnectToWorkflow()">Reconnect <span class="fa fa-refresh"></span></button> </div> <div class="row" style="margin-top: 2px"> <button uib-tooltip="Update csv file" id="update2" ng-if="ctrl.dataLoaded" class="btn secondaryColor" ng-click="ctrl.goToImport()"><span class="fa fa-chevron-left"></span> Back to Import</button> <button uib-tooltip="Import csv file" id="start1" ng-if="!ctrl.dataLoaded" class="btn secondaryColor" ng-click="ctrl.goToImport()">Import Data <span class="fa fa-upload"></span></button> <span style="font-size: medium"> Status:</span> <span style="font-size: xx-large; vertical-align: middle" ng-if="ctrl.dataLoaded"><span class="glyphicon glyphicon-ok-circle"></span></span> <span style="font-size: large; color: grey" ng-if="!ctrl.dataLoaded && !ctrl.loading">no data </span> <span style="font-size: large; color: grey" ng-if="ctrl.loading"><span spin-circle style="width: 30px; height: 30px"></span></span> </div> </div>'),a.put("views/task.template.html",'<!--Task description--> <div class="taskInner description"> <button class="btn btn-link infoButton" ng-model="info.one" uib-btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0"> <span class="glyphicon glyphicon-info-sign"></span> </button> <div style="display: inline-block"> <span class="taskTitle">Task</span><br> Short description </div> <div class="alert alert-info" ng-show="info.one"> Description </div> </div> <!--Task content--> <!--Task Parameters and details--> <div class="row taskInner"> <div class="col-sm-6" style="text-align: left"> <h4>Current threshold: {{ctrl.newImportance | number:4 }}</h4> </div> <div class="col-sm-6" style="text-align: right"> <label class="btn btn-default" uib-btn-checkbox ng-model="ctrl.showDetails" uib-btn-checkbox btn-checkbox-true="true" btn-checkbox-false="false" uib-tooltip="Show detailed information"> Inspect Words </label> </div> </div> <!--Task advanced content--> <!--Footer -> Apply and Undo --> <hr> <div class="row taskInner"> <div class="col-sm-6" style="text-align: left"> <h4>Number of replacements: {{ ctrl.replacements }}</h4> </div> <div class="col-sm-6" style="text-align: right"> <label class="btn btn-undo" uib-tooltip="Undo changes" ng-click="ctrl.undo()" ng-disabled="!ctrl.touched"> <span class="fa fa-undo"></span> </label> <label class="btn btn-success btn-lg" uib-tooltip="Apply changes" ng-click="ctrl.apply()" ng-disabled="!ctrl.touched"> <span class="glyphicon glyphicon-ok"></span> </label> </div> </div>'),
a.put("views/upload.html",'<div class="fileUpload btn primaryColor" style="width: 100px"> Upload <span class="fa fa-upload"></span> <form> <input type="file" class="upload"> </form> </div>'),a.put("views/workflow.html",'<div class="navbar navbar-fixed-top tagrefinery"> <div style="text-align: center; margin-top: 7px; margin-bottom: 3px"> <img src="logo.png" style="height: 60px"> </div> <div id="guided5" style="position: absolute; width: 200px; height: 55px;top: 0;left: 0"> <button ng-click="ctrl.goToStart()" class="btn btn-helper" style="position: absolute; top: 5px; left: 0" uib-tooltip="Back to the Start Screen" tooltip-placement="right"><span class="fa fa-home"></span></button> <button ng-click="ctrl.showLinkedView()" class="btn btn-helper" style="position: absolute; top: 5px; left: 50px" uib-tooltip="Go to the Linked mode" tooltip-placement="right"><span class="fa fa-bar-chart"></span></button> <button ng-click="ctrl.startWithDefaults()" class="btn btn-helper" style="position: absolute; top: 5px; left: 100px" uib-tooltip="Go to the Guided mode" tooltip-placement="right"><span class="fa fa-compass"></span></button> <button ng-click="ctrl.showAdvancedView()" class="btn btn-helper" style="position: absolute; top: 5px; left: 150px" uib-tooltip="Go to the Advanced mode" tooltip-placement="right"><span class="fa fa-list-alt"></span></button> </div> <button ng-show="false" ng-disabled="ctrl.mode == \'free\'" class="btn btn-helper" ng-click="CallMe();" uib-tooltip="Shows the Introduction for this Page" tooltip-placement="left"> <i id="start3" class="fa fa-film"></i> </button> <hr style="margin: 0 auto"> </div> <div ng-controller="WorkflowCtrl as ctrl" ng-show="ctrl.init" style="margin-top: 95px"> <div ng-if="ctrl.mode == \'guided\'" ng-include="\'views/guided.html\'"></div> <div ng-if="ctrl.mode == \'linked\'" ng-include="\'views/linked.html\'"></div> <div ng-if="ctrl.mode == \'free\'" ng-include="\'views/dashboard.html\'"></div> </div>')}]);